System.register("chunks:///_virtual/Ball.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Utils.ts","./Brick.ts","./GameCtrl.ts","./GameData.ts"],(function(t){var e,i,l,s,a,n,o,c,d,h,y,r,u,g,b,p,_,B;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,l=t._decorator,s=t.RigidBody2D,a=t.CircleCollider2D,n=t.Contact2DType,o=t.Vec3,c=t.v2,d=t.misc,h=t.tween,y=t.UIOpacity,r=t.Vec2,u=t.Component},function(t){g=t.UTILS},function(t){b=t.Brick},function(t){p=t.GAMECTRL},function(t){_=t.GAMEDATA,B=t.ColliderTag}],execute:function(){var m;i._RF.push({},"1bf53TUXMpJxKJ7bUba/EXB","Ball",void 0);var f=l.ccclass;l.property,t("Ball",f("Ball")(m=function(t){function i(){for(var e,i=arguments.length,l=new Array(i),s=0;s<i;s++)l[s]=arguments[s];return(e=t.call.apply(t,[this].concat(l))||this).ball_idx=0,e.ball_speed=0,e.ball_adjust_speed=0,e.ball_prevVelocity=new r,e.isHuge=!1,e.deltaTime=0,e.isMoving=!1,e.ballRigidBody=null,e.isEnemyBall=!1,e.hugeBallDuraSec=0,e.checkDeltaTime=0,e.isReflect=!1,e}e(i,t);var l=i.prototype;return l.onLoad=function(){this.hugeBallDuraSec=_.getBalanceItemData().huge_ball_sec,this.ballRigidBody=this.node.getComponent(s);var t=this.node.getComponent(a);t&&t.on(n.BEGIN_CONTACT,this.onBeginContact,this)},l.onBeginContact=function(t,e,i){switch(e.tag){case B.BRICK:this.adjustVelocity(t),p.brickObjPool.contactBricksLayer(e);break;case B.BRICK_ALLY:this.adjustVelocity(t),e.node.getComponent(b).damage(),this.isEnemyBall&&this.node.destroy();break;case B.WALL:this.adjustVelocity(t);break;case B.BALL_OUT:this.isEnemyBall?this.node.destroy():p.ballMgr.destroyBall(this.ball_idx)}},l.moveStart=function(t,e,i){this.ballRigidBody.wakeUp();var l=new o;this.ball_speed=e?10:20,l.x=this.ball_speed*i.x,l.y=this.ball_speed*i.y,this.ball_adjust_speed=this.ball_speed/2,this.ballRigidBody.linearVelocity=c(l.x,l.y),this.isMoving=!0,this.ball_idx=t,this.isEnemyBall=e,!1===e&&(this.node.scale=new o(.35,.35))},l.moveStop=function(){this.ball_prevVelocity=this.ballRigidBody.linearVelocity.clone(),this.ballRigidBody.sleep(),this.isMoving=!1},l.moveReflect=function(t,e){var i=this;if(!1===this.isReflect){var l=Math.min(1,Math.abs(t)/(e/2)),s=90;t>0?s=90-60*l:t<0&&(s=90+60*l);var a=d.degreesToRadians(s),n=this.ball_speed*(Math.round(100*Math.cos(a))/100),o=this.ball_speed*(Math.round(100*Math.sin(a))/100);this.ballRigidBody.linearVelocity=c(n,o),this.isReflect=!0,setTimeout((function(){i.isReflect=!1}),100)}},l.setVisible=function(t){this.node.active=t},l.isMove=function(){return this.isMoving},l.hugeBall=function(){!1===this.isEnemyBall&&(this.deltaTime=0,!1===this.isHuge&&(this.isHuge=!0,h(this.node).to(.3,{scale:new o(1,1,0)}).start()))},l.adjustVelocity=function(t){if(!1===this.isEnemyBall){var e=t.node.getComponent(s);if(e){var i=e.linearVelocity;i.x>=-10&&i.x<=10&&i.y>=-10&&i.y<=10&&(0===g.getRandomInt(0,1)?i.x=2*i.x:i.y=2*i.y,e.linearVelocity=c(i.x,i.y));var l=!1;(i=e.linearVelocity).x>=-2&&i.x<=2&&(i.x<0?i.x=-this.ball_adjust_speed:i.x>0?i.x=this.ball_adjust_speed:(l=!0,i.x=g.getRandomInt(-this.ball_adjust_speed,this.ball_adjust_speed)),e.linearVelocity=c(i.x,i.y)),i.y>=-2&&i.y<=2&&(i.y<0?i.y=-this.ball_adjust_speed:i.y>0?i.y=this.ball_adjust_speed:l?0===g.getRandomInt(0,1)?i.y=-this.ball_adjust_speed:i.y=this.ball_adjust_speed:i.y=g.getRandomInt(-this.ball_adjust_speed,this.ball_adjust_speed),e.linearVelocity=c(i.x,i.y)),(i.x>=40||i.x<=-40)&&(i.y>=40||i.y<=-40)?e.linearVelocity=c(i.x/2,i.y/2):((i.x>=40||i.x<=-40)&&(e.linearVelocity=c(i.x/2,i.y)),(i.y>=40||i.y<=-40)&&(e.linearVelocity=c(i.x,i.y/2)))}}},l.setFadeOut=function(){var t=this.node.getComponent(y);h(t).to(.3,{opacity:0}).start()},l.update=function(t){null!==p&&!1===this.isEnemyBall&&p.isPlayingNow()&&this.isMoving&&(this.isHuge&&(this.deltaTime+=t,this.deltaTime>=this.hugeBallDuraSec&&(h(this.node).to(.3,{scale:new o(.35,.35,0)}).start(),this.deltaTime=0,this.isHuge=!1)),this.checkDeltaTime+=t,this.checkDeltaTime>=1&&(this.checkDeltaTime=0,!1===this.ballRigidBody.isAwake()&&(this.ballRigidBody.wakeUp(),this.ballRigidBody.linearVelocity=c(20,-20)),this.ballRigidBody.linearVelocity===r.ZERO&&(this.ballRigidBody.linearVelocity=c(20,20))))},i}(u))||m);i._RF.pop()}}}));

System.register("chunks:///_virtual/BallMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameData.ts","./Utils.ts","./Ball.ts","./GameCtrl.ts","./TopUI.ts"],(function(t){var l,e,a,n,i,o,r,s,c,p,u,h,d,f,B;return{setters:[function(t){l=t.applyDecoratedDescriptor,e=t.inheritsLoose,a=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){i=t.cclegacy,o=t._decorator,r=t.Prefab,s=t.instantiate,c=t.Vec2,p=t.Component},function(t){u=t.GAMEDATA},function(t){h=t.UTILS},function(t){d=t.Ball},function(t){f=t.GAMECTRL},function(t){B=t.TOPUI_KIND}],execute:function(){var m,v,_,b,M,g,y;i._RF.push({},"e590dHAIS1OypGVTYbH4Pya","BallMgr",void 0);var P=o.ccclass,S=o.property;t("BallMgr",(m=P("BallMgr"),v=S({type:r}),_=S({type:r}),m((g=l((M=function(t){function l(){for(var l,e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];return l=t.call.apply(t,[this].concat(i))||this,a(l,"ballPrefab",g,n(l)),a(l,"enemyBallPrefab",y,n(l)),l.paddle_ball_cnt=0,l.create_ball_idx=0,l.isBallStop=!1,l.moveBallMap=new Map,l}e(l,t);var i=l.prototype;return i.init=function(){this.reset()},i.reset=function(){this.paddle_ball_cnt=u.getPaddleAttr().ball_count,this.create_ball_idx=0,this.isBallStop=!1,this.moveBallMap.clear()},i.addPaddleBallCnt=function(t){this.paddle_ball_cnt+=t},i.getPaddleBallCnt=function(){return this.paddle_ball_cnt},i.getBallStop=function(){return this.isBallStop},i.createBall=function(t,l,e,a){if(l){var n=s(this.enemyBallPrefab),i=n.getComponent(d);n.setPosition(e),n.parent=t;var o=Math.random(),r=0===h.getRandomInt(0,1),p=new c(r?o:-o,-1);i.moveStart(100,l,p)}else if(this.paddle_ball_cnt>0){var u=s(this.ballPrefab);u.setPosition(e),u.parent=t,this.moveBallMap.set(this.create_ball_idx,u);var m=null==a?void 0:a.getBallVector(),v=u.getComponent(d);v&&v.moveStart(this.create_ball_idx,l,m),this.create_ball_idx++,this.paddle_ball_cnt--,f.topUI.utUI(B.LIFE,this.paddle_ball_cnt,!1),this.paddle_ball_cnt<=0&&(null==a||a.setBallDirection(!1,!1))}},i.fadeOutBall=function(){null!==this.moveBallMap&&this.moveBallMap.size>0&&this.moveBallMap.forEach((function(t){t&&t.getComponent(d).setFadeOut()}))},i.hugeBall=function(){!1===this.isBallStop&&f.isPlayingNow()&&this.moveBallMap.forEach((function(t){t&&t.getComponent(d).hugeBall()}))},i.moveStopBall=function(){null!==this.moveBallMap&&this.moveBallMap.size>0&&this.moveBallMap.forEach((function(t){t&&t.getComponent(d).moveStop()})),this.isBallStop=!0},i.destroyBall=function(t){var l=this.moveBallMap.get(t);l&&(this.moveBallMap.delete(t),l.destroy(),this.paddle_ball_cnt<=0&&0===this.moveBallMap.size&&f.procGameOver())},i.destroyAllBall=function(){this.moveBallMap.size>0&&this.moveBallMap.forEach((function(t){t&&t.destroy()})),this.moveBallMap.clear()},l}(p)).prototype,"ballPrefab",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=l(M.prototype,"enemyBallPrefab",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=M))||b));i._RF.pop()}}}));

System.register("chunks:///_virtual/Brick.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameData.ts"],(function(t){var i,e,n,o,s,r,c,a,p,h,l;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy,n=t._decorator,o=t.Vec2,s=t.Vec3,r=t.BoxCollider2D,c=t.Contact2DType,a=t.instantiate,p=t.ParticleSystem2D,h=t.Component},function(t){l=t.ColliderTag}],execute:function(){var g;e._RF.push({},"59814LQ735K7q3qIQVF4VHW","Brick",void 0);var u=n.ccclass,M=(n.property,t("BrickType",function(t){return t[t.NORMAL_0=0]="NORMAL_0",t[t.NORMAL_1=1]="NORMAL_1",t[t.NORMAL_2=2]="NORMAL_2",t[t.IMMORTAL=3]="IMMORTAL",t[t.BOMB=4]="BOMB",t[t.ALLY=5]="ALLY",t}({})));t("Brick",u("Brick")(g=function(t){function e(){for(var i,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(i=t.call.apply(t,[this].concat(n))||this).brickMsg=null,i.particle=null,i.isAlive=!0,i}i(e,t);var n=e.prototype;return n.setProperty=function(t,i,e,n,a,p,h,l,g,u,d,k){(this.isAlive=!0,this.brickMsg={msg:"",type:t,idx:new o(i,e),hp:p,position:new s(0,0,0),sc:t===M.BOMB?5:p+1,enemy:h,group:g,bombLineIdx:u,attackableRate:d,attackableCnt:k},this.particle=l,this.node.setPosition(new s(n,a,0)),t===M.ALLY)&&this.node.getComponent(r).on(c.BEGIN_CONTACT,this.onBeginContact,this)},n.onBeginContact=function(t,i,n){if(i.tag===l.BRICK){this.damage();var o=i.node.getComponent(e);null!==o&&o.damage()}},n.damage=function(t){if(void 0===t&&(t=!1),!1!==this.isAlive&&this.brickMsg.type!==M.IMMORTAL)return this.brickMsg.hp--,this.brickMsg.hp<0||t?(this.isAlive=!1,this.brickMsg.msg="Destroy",this.brickMsg.position=new s(this.node.position.x,this.node.parent.position.y+this.node.position.y,0),this.createParticle(this.node.position),this.node.destroy(),this.brickMsg):(this.brickMsg.msg="Damage",this.brickMsg.position=new s(this.node.position.x,this.node.parent.position.y+this.node.position.y,0),this.brickMsg)},n.createParticle=function(t){var i=a(this.particle);i.parent=this.node.parent,i.setPosition(t),i.getComponent(p).duration=.5,i.name="Particle"},e}(h))||g);e._RF.pop()}}}));

System.register("chunks:///_virtual/BricksObjectPool.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Brick.ts","./GameData.ts","./GameCtrl.ts","./ItemMgr.ts","./Utils.ts","./NetworkMgr.ts"],(function(e){var i,t,r,n,s,a,o,c,l,d,k,b,p,h,f,u,m,g,v,y,B,_,x,I,N,M,D,S,C;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized,s=e.asyncToGenerator,a=e.regeneratorRuntime},function(e){o=e.cclegacy,c=e._decorator,l=e.Prefab,d=e.Node,k=e.Vec3,b=e.UITransform,p=e.resources,h=e.JsonAsset,f=e.Size,u=e.instantiate,m=e.BoxCollider2D,g=e.tween,v=e.v3,y=e.Tween,B=e.Component},function(e){_=e.Brick,x=e.BrickType},function(e){I=e.GAMEDATA,N=e.PlayMode},function(e){M=e.GAMECTRL},function(e){D=e.ItemMgr},function(e){S=e.UTILS},function(e){C=e.NETWORKMGR}],execute:function(){var w,P,E,T,z,A,L,R,G,O,q,F,j;o._RF.push({},"b95cau4l8JOW6RB0Yo8kqzu","BricksObjectPool",void 0);var U=c.ccclass,H=c.property;e("BricksObjectPool",(w=U("BricksObjectPool"),P=H({type:l}),E=H({type:l}),T=H({type:l}),z=H({type:d}),A=H({type:l}),w((G=i((R=function(e){function i(){for(var i,t=arguments.length,s=new Array(t),a=0;a<t;a++)s[a]=arguments[a];return i=e.call.apply(e,[this].concat(s))||this,r(i,"bricks",G,n(i)),r(i,"bricks_break",O,n(i)),r(i,"particle",q,n(i)),r(i,"defenseBricksNode",F,n(i)),r(i,"rayCast",j,n(i)),i.itemMgr=null,i.brickSize=null,i.brickEnemyCnt=0,i.defenseBricksOriginPos=null,i.screenHeight=0,i.infiniteStage=0,i.infiniteDiff=0,i.infiniteTimeout=null,i.moveBricksSpeed=0,i.bombLineIdx=0,i.bombLineBricks=new Map,i.bricksNodeIdx=0,i.bricksGroupIdx=0,i.bricksRemoveIdx=0,i.bricksNode=[],i.analyticsDataMap=new Map,i.balance_stage_max=10,i.balance_start_speed=90,i.balance_max_speed=30,i.balance_inc_speed=2,i.balance_stage_gap=50,i.defenseBrickDelta=0,i}t(i,e);var o=i.prototype;return o.init=function(){var e=this;this.itemMgr=this.node.getComponent(D),this.defenseBricksOriginPos=new k(0,this.defenseBricksNode.position.y,0),this.screenHeight=this.node.parent.getComponent(b).height,this.bombLineBricks.clear(),this.brickEnemyCnt=0,this.defenseBrickDelta=0,this.itemMgr.resetItemMgr(),this.analyticsDataMap.set(0,""),p.load("data/balance_infinite",h,(function(i,t){if(i)console.log("Failed to load json file : ",i);else{var r=t.json;e.balance_stage_max=r.max_stage,e.balance_start_speed=r.start_speed,e.balance_max_speed=r.max_speed,e.balance_inc_speed=r.inc_speed,e.balance_stage_gap=r.stage_gap}e.createEnemyBricks(),e.infiniteTimeout=setInterval((function(){e.checkNextBricks()}),1e3)}))},o.createEnemyBricks=function(){var e=this,i=I.getPlayMode(),t="";I.tutorial?t="data/tutorial"+I.getTutorialStage():i===N.STAGE?t="data/stage"+I.getCurStage():(this.infiniteStage++,this.infiniteStage>this.balance_stage_max&&(this.infiniteStage=1,this.infiniteDiff++),t="data/infinite"+this.infiniteStage);var r=this.node.getComponent(b).width;p.load(t,h,(function(t,n){if(t)console.log("Failed to load json file : ",t);else{var s=n.json,a=s.brick_item.total_rate,o=s.brick_item.each_rate;e.itemMgr.setItemMgrInfo(a,o);var c=0;i===N.STAGE?e.moveBricksSpeed=s.brick_dynamic.gravity_time:e.moveBricksSpeed=Math.max(e.balance_max_speed,e.balance_start_speed-e.infiniteDiff*e.balance_inc_speed);var l=0;0===e.moveBricksSpeed&&(l=s.brick_dynamic.move_horizon_speed);var p=s.brick_dynamic.enemy_ball_rate,h=s.brick_dynamic.enemy_ball_cnt;e.bricksNode[e.bricksNodeIdx]=new d("Bricks_"+e.bricksGroupIdx),e.node.addChild(e.bricksNode[e.bricksNodeIdx]),e.brickSize=new f(s.brick_size.width,s.brick_size.height);for(var y=s.bricks.length,B=0;B<y;B++){var M=s.bricks[B].length,D=[];e.moveBricksSpeed>0&&(c+=s.brick_gap.t+e.brickSize.height+s.brick_gap.v);for(var C=0;C<M;C++){var w=s.bricks[B][C].type,P=s.bricks[B][C].hp;if(w>=0){var E=u(e.bricks[w]);E.getComponent(b).setContentSize(e.brickSize),E.getComponent(m).size=e.brickSize,e.bricksNode[e.bricksNodeIdx].addChild(E);var T=s.brick_gap.l+s.brick_size.width/2+C*(s.brick_size.width+s.brick_gap.h)-r/2,z=-s.brick_gap.t-s.brick_size.height/2-B*(s.brick_size.height+s.brick_gap.v),A=E.getComponent(_);A.setProperty(w,C,B,T,z,P,!0,e.particle,e.bricksGroupIdx,e.bombLineIdx,p,h),w===x.IMMORTAL?E.name="BrickIm":(E.name="Brick",e.brickEnemyCnt++,D[C]=A)}C===M-1&&(e.bombLineBricks.set(e.bombLineIdx,D),e.bombLineIdx++)}}if(e.bricksNode[e.bricksNodeIdx].setPosition(0,c),e.moveBricksSpeed>0){var L=e.bricksNode[e.bricksNodeIdx],R=e.screenHeight+c;if(I.getPlayMode()===N.INFINITE)g(L.position).by(e.moveBricksSpeed,new k(0,-R,0),{easing:"linear",onUpdate:function(e,i){L.position=e}}).call((function(){L.removeFromParent(),e.bricksRemoveIdx++;var i=L.name,t=parseInt(i.match(/\d+/)[0]);e.reqAnalytics(t)})).start();else{var G=g(L.position).by(e.moveBricksSpeed,new k(0,-R,0),{easing:"linear",onUpdate:function(e,i){L.position=e}}),O=g(L.position).call((function(){L.position=new k(0,c,0)}));g(L.position).sequence(G,O).repeatForever().start()}}else if(l>0){var q=-(s.brick_gap.l/2+30),F=s.brick_gap.l/2+30,j=10-l,U=e.bricksNode[e.bricksNodeIdx],H=g(U).to(j,{position:v(q,U.position.y,0)}),J=g(U).to(j,{position:v(F,U.position.y,0)});0===S.getRandomInt(0,1)?g(U).sequence(H,J).repeatForever().start():g(U).sequence(J,H).repeatForever().start()}}}))},o.checkNextBricks=function(){this.moveBricksSpeed>0&&I.getPlayMode()===N.INFINITE&&null!==this.bricksNode[this.bricksNodeIdx]&&this.bricksNode[this.bricksNodeIdx].position.y<=-this.balance_stage_gap&&(this.bricksNodeIdx++,this.bricksGroupIdx++,this.bricksNodeIdx>=3&&(this.bricksNodeIdx=0),this.createEnemyBricks())},o.contactBricksLayer=function(e){var i=e.node.getComponent(_).damage();void 0!==i&&("Destroy"===i.msg?i.enemy&&(this.procBrickDestroy(i),i.type===x.BOMB&&this.procBombBricks(i.bombLineIdx,i.position)):"Damage"===i.msg&&this.procBrickDamage(e.node,i))},o.procBrickDestroy=function(e){var i=this;this.brickEnemyCnt--,M.us(e.sc,!1);var t=-1;if(M.isPlayingNow()){if(I.getPlayMode()===N.STAGE&&this.brickEnemyCnt<=0)setTimeout((function(){i.isBreakAllBricks().then((function(e){!0===e&&(M.ballMgr.moveStopBall(),g(i.node).delay(.5).call((function(){M.ballMgr.fadeOutBall(),i.itemMgr.checkItemExist()?i.itemMgr.setItemAutoGet():M.procGameClear()})).start())}))}),100);else{var r=null;if(I.getPlayMode()===N.STAGE){var n=this.bricksNode[this.bricksNodeIdx];r=new k(n.position.x+e.position.x,e.position.y)}else r=e.position;t=this.itemMgr.createItem(r)}if(I.getPlayMode()===N.INFINITE)try{var s=t>-1?1:0;0===s&&(t=0);var a="["+e.idx.x+","+e.idx.y+","+s+","+t+"] ",o=e.group,c=this.analyticsDataMap.get(o);void 0===c&&(c=""),c+=a,this.analyticsDataMap.set(o,c)}catch(e){console.log(">> error : ",e)}}},o.procBrickDamage=function(e,i){var t=this,r=Number(i.hp),n=u(this.bricks_break[r]);if((e.addChild(n),n.getComponent(b).setContentSize(this.brickSize),i.enemy)&&(i.attackableCnt>0&&i.attackableRate>0&&S.getRandomInt(1,100)<=i.attackableRate))for(var s=i.attackableCnt>2?2:i.attackableCnt,a=this.bricksNode[this.bricksNodeIdx],o=function(){var e=new k(a.position.x+i.position.x,t.node.position.y+i.position.y,0);g(t.node).delay(.1).call((function(){M.ballMgr.createBall(t.node.parent,!0,e,null)})).start()},c=0;c<s;c++)o()},o.procBombBricks=function(e,i){var t=this;if(e>=0){var r=this.bombLineBricks.get(e),n=u(this.rayCast);this.node.addChild(n),n.setPosition(i.x,i.y,0),n.scale=new k(.1,.1,0),g(n).to(.2,{scale:new k(2,2,0)}).call((function(){r.forEach((function(e,i){if(null!==e&&null!==e.node&&e.node.isValid){var r=e.damage();void 0!==r&&("Destroy"===r.msg?(t.procBrickDestroy(r),r.type===x.BOMB&&t.procBombBricks(r.bombLineIdx,r.position)):"Damage"===r.msg&&t.procBrickDamage(e.node,r))}n.removeFromParent()}))})).start()}},o.resetBricks=function(){var e=this;this.node.removeAllChildren(),this.node.setPosition(0,this.node.position.y),this.brickEnemyCnt=0,this.bombLineIdx=0,this.bombLineBricks.clear(),this.infiniteStage=0,this.infiniteDiff=0,this.bricksNodeIdx=0,this.moveBricksSpeed=0,this.bricksGroupIdx=0,this.bricksRemoveIdx=0,this.analyticsDataMap.clear(),this.analyticsDataMap.set(0,""),this.itemMgr.resetItemMgr(),this.defenseBrickDelta=0,this.removeDefenseBricks(),this.createEnemyBricks(),this.infiniteTimeout=setInterval((function(){e.checkNextBricks()}),1e3)},o.stopBricks=function(){if(null!==this.infiniteTimeout&&clearInterval(this.infiniteTimeout),y.stopAll(),I.getPlayMode()===N.INFINITE){var e=this.bricksGroupIdx+1;if(e>this.bricksRemoveIdx){var i=e-this.bricksRemoveIdx;i>0?this.reqAnalyticsRemain(i):M.reqSaveData()}else M.reqSaveData()}},o.reqAnalyticsRemain=function(){var e=s(a().mark((function e(i){var t,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=0;case 1:if(!(t<i)){e.next=8;break}return r=this.bricksRemoveIdx+t,e.next=5,this.reqAnalytics(r);case 5:t++,e.next=1;break;case 8:M.reqSaveData();case 9:case"end":return e.stop()}}),e,this)})));return function(i){return e.apply(this,arguments)}}(),o.getItemMgr=function(){return this.itemMgr},o.getParticlePrefab=function(){return this.particle},o.createDefenseBricks=function(){this.removeDefenseBricks();for(var e=this.defenseBricksNode.getComponent(b).width,i=e/60-1,t=x.ALLY,r=0;r<i;r++){var n=u(this.bricks[t]);this.defenseBricksNode.addChild(n);var s=-e/2+4+30+64*r;n.getComponent(_).setProperty(t,r,0,s,0,0,!1,this.particle,-1,-1,0,0)}var a=I.getBalanceItemData().defense_brick_sec;this.defenseBrickDelta=a,g(this.defenseBricksNode).to(.2,{position:new k(0,this.defenseBricksOriginPos.y+30)}).start()},o.removeDefenseBricks=function(){this.defenseBricksNode.removeAllChildren(),this.defenseBricksNode.position=this.defenseBricksOriginPos},o.isBreakAllBricks=function(){var e=s(a().mark((function e(){var i,t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=this.bricksNode[this.bricksNodeIdx].children,t=0;case 2:if(!(t<i.length)){e.next=8;break}if("Brick"!==i[t].name){e.next=5;break}return e.abrupt("return",!1);case 5:t++,e.next=2;break;case 8:return e.abrupt("return",!0);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),o.reqAnalytics=function(){var e=s(a().mark((function e(i){var t,r,n,s,o,c,l,d;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=I.getServerData().id,r=I.getPassword(),n=Math.floor((new Date).getTime()/1e3),void 0===(s=this.analyticsDataMap.get(i))&&(s=""),o={value1:n,value2:i,value3:i%this.balance_stage_max,value4:s},c=JSON.stringify(o),e.next=9,S.getEncrypt(I.getEcKey(),c);case 9:return l=e.sent,e.next=12,C.reqInfinitePlayInfo(t,r,l);case 12:if(void 0===(d=e.sent)){e.next=17;break}"0"===d.returnCode&&I.setEcKey(String(d.date)),e.next=18;break;case 17:return e.abrupt("return",void 0);case 18:case"end":return e.stop()}}),e,this)})));return function(i){return e.apply(this,arguments)}}(),o.update=function(e){var i=this;this.defenseBrickDelta>0&&(this.defenseBrickDelta-=e,this.defenseBrickDelta<=0&&g(this.defenseBricksNode).to(.2,{position:new k(0,this.defenseBricksOriginPos.y-30)}).call((function(){i.removeDefenseBricks()})).start())},i}(B)).prototype,"bricks",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),O=i(R.prototype,"bricks_break",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),q=i(R.prototype,"particle",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=i(R.prototype,"defenseBricksNode",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=i(R.prototype,"rayCast",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=R))||L));o._RF.pop()}}}));

System.register("chunks:///_virtual/Bullet.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameCtrl.ts","./GameData.ts"],(function(t){var o,n,e,r,i,c,s,l;return{setters:[function(t){o=t.inheritsLoose},function(t){n=t.cclegacy,e=t._decorator,r=t.BoxCollider2D,i=t.Contact2DType,c=t.Component},function(t){s=t.GAMECTRL},function(t){l=t.ColliderTag}],execute:function(){var a;n._RF.push({},"7bed1iYU2pFFrp45Dol6cw3","Bullet",void 0);var u=e.ccclass;e.property,t("Bullet",u("Bullet")(a=function(t){function n(){return t.apply(this,arguments)||this}o(n,t);var e=n.prototype;return e.onLoad=function(){this.getComponent(r).on(i.BEGIN_CONTACT,this.onBeginContact,this)},e.onBeginContact=function(t,o,n){o.tag===l.BRICK?(s.brickObjPool.contactBricksLayer(o),this.node.destroy()):o.tag===l.WALL&&this.node.destroy()},n}(c))||a);n._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,n,s,l,r,a,g,h,p,c,C,d,m,u,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,r=t.Node,a=t.Color,g=t.Canvas,h=t.UITransform,p=t.instantiate,c=t.Label,C=t.RichText,d=t.Toggle,m=t.Button,u=t.director,L=t.Component}],execute:function(){var f,M,b,v,T,S,x,E,I;s._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var A=l.ccclass,y=l.property;t("DebugViewRuntimeControl",(f=A("internal.DebugViewRuntimeControl"),M=y(r),b=y(r),v=y(r),f((x=e((S=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,i(e,"compositeModeToggle",x,n(e)),i(e,"singleModeToggle",E,n(e)),i(e,"EnableAllCompositeModeButton",I,n(e)),e._single=0,e.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct Internal Specular","Env Internal Specular","Internal All","Fog"],e.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","Internal Specular","TT"],e.strMisc=["CSM Layer Coloration","Lighting With Albedo"],e.compositeModeToggleList=[],e.singleModeToggleList=[],e.miscModeToggleList=[],e.textComponentList=[],e.labelComponentList=[],e.textContentList=[],e.hideButtonLabel=void 0,e._currentColorIndex=0,e.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],e.color=[a.WHITE,a.BLACK,a.RED,a.GREEN,a.BLUE],e}o(e,t);var s=e.prototype;return s.start=function(){if(this.node.parent.getComponent(g)){var t=this.node.parent.getComponent(h),e=.5*t.width,o=.5*t.height,i=.1*e-e,n=o-.1*o,s=this.node.getChildByName("MiscMode"),l=p(s);l.parent=this.node,l.name="Buttons";var r=p(s);r.parent=this.node,r.name="Titles";for(var u=0;u<2;u++){var L=p(this.EnableAllCompositeModeButton.getChildByName("Label"));L.setPosition(i+(u>0?450:150),n,0),L.setScale(.75,.75,.75),L.parent=r;var f=L.getComponent(c);f.string=u?"----------Composite Mode----------":"----------Single Mode----------",f.color=a.WHITE,f.overflow=0,this.labelComponentList[this.labelComponentList.length]=f}n-=20;for(var M=0,b=0;b<this.strSingle.length;b++,M++){b===this.strSingle.length>>1&&(i+=200,M=0);var v=b?p(this.singleModeToggle):this.singleModeToggle;v.setPosition(i,n-20*M,0),v.setScale(.5,.5,.5),v.parent=this.singleModeToggle.parent;var T=v.getComponentInChildren(C);T.string=this.strSingle[b],this.textComponentList[this.textComponentList.length]=T,this.textContentList[this.textContentList.length]=T.string,v.on(d.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[b]=v}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(m.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;var S=this.EnableAllCompositeModeButton.getComponentInChildren(c);this.labelComponentList[this.labelComponentList.length]=S;var x=p(this.EnableAllCompositeModeButton);x.setPosition(i+90,n,0),x.setScale(.5,.5,.5),x.on(m.EventType.CLICK,this.changeTextColor,this),x.parent=l,(S=x.getComponentInChildren(c)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=S;var E=p(this.EnableAllCompositeModeButton);E.setPosition(i+200,n,0),E.setScale(.5,.5,.5),E.on(m.EventType.CLICK,this.hideUI,this),E.parent=this.node.parent,(S=E.getComponentInChildren(c)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=S,this.hideButtonLabel=S,n-=40;for(var I=0;I<this.strMisc.length;I++){var A=p(this.compositeModeToggle);A.setPosition(i,n-20*I,0),A.setScale(.5,.5,.5),A.parent=s;var y=A.getComponentInChildren(C);y.string=this.strMisc[I],this.textComponentList[this.textComponentList.length]=y,this.textContentList[this.textContentList.length]=y.string,A.getComponent(d).isChecked=!!I,A.on(d.EventType.TOGGLE,I?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[I]=A}n-=150;for(var D=0;D<this.strComposite.length;D++){var B=D?p(this.compositeModeToggle):this.compositeModeToggle;B.setPosition(i,n-20*D,0),B.setScale(.5,.5,.5),B.parent=this.compositeModeToggle.parent;var w=B.getComponentInChildren(C);w.string=this.strComposite[D],this.textComponentList[this.textComponentList.length]=w,this.textContentList[this.textContentList.length]=w.string,B.on(d.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[D]=B}}else console.error("debug-view-runtime-control should be child of Canvas")},s.isTextMatched=function(t,e){var o=new String(t),i=o.search(">");return-1===i?t===e:(o=(o=o.substr(i+1)).substr(0,o.search("<")))===e},s.toggleSingleMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strSingle.length;i++)this.isTextMatched(o.string,this.strSingle[i])&&(e.singleMode=i)},s.toggleCompositeMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)},s.toggleLightingWithAlbedo=function(t){u.root.debugView.lightingWithAlbedo=t.isChecked},s.toggleCSMColoration=function(t){u.root.debugView.csmLayerColoration=t.isChecked},s.enableAllCompositeMode=function(t){var e=u.root.debugView;e.enableAllCompositeMode(!0);for(var o=0;o<this.compositeModeToggleList.length;o++){this.compositeModeToggleList[o].getComponent(d).isChecked=!0}var i=this.miscModeToggleList[0].getComponent(d);i.isChecked=!1,e.csmLayerColoration=!1,(i=this.miscModeToggleList[1].getComponent(d)).isChecked=!0,e.lightingWithAlbedo=!0},s.hideUI=function(t){var e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"},s.changeTextColor=function(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var e=0;e<this.textComponentList.length;e++)this.textComponentList[e].string=this.strColor[this._currentColorIndex]+this.textContentList[e]+"</color>";for(var o=0;o<this.labelComponentList.length;o++)this.labelComponentList[o].color=this.color[this._currentColorIndex]},s.onLoad=function(){},s.update=function(t){},e}(L)).prototype,"compositeModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(S.prototype,"singleModeToggle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(S.prototype,"EnableAllCompositeModeButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=S))||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/GameCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameData.ts","./BricksObjectPool.ts","./PaddleMgr.ts","./TopUI.ts","./Utils.ts","./NetworkMgr.ts","./Popup.ts","./SceneMgr.ts","./BallMgr.ts"],(function(e){var t,i,a,o,n,r,l,s,d,g,c,h,u,p,f,m,N,y,v,I,C,S,b,B,M,P,T,E,U,D,O,w,_,A;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,a=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){n=e.cclegacy,r=e._decorator,l=e.Node,s=e.resources,d=e.JsonAsset,g=e.director,c=e.Canvas,h=e.UITransform,u=e.tween,p=e.Vec3,f=e.input,m=e.Input,N=e.Button,y=e.KeyCode,v=e.Tween,I=e.Label,C=e.Component},function(e){S=e.GAMEDATA,b=e.PlayMode,B=e.STAGE_MAX},function(e){M=e.BricksObjectPool},function(e){P=e.PaddleMgr},function(e){T=e.TopUI,E=e.TOPUI_KIND},function(e){U=e.UTILS},function(e){D=e.NETWORKMGR},function(e){O=e.Popup,w=e.PopupType},function(e){_=e.SCENEMGR},function(e){A=e.BallMgr}],execute:function(){var k,G,K,L,F,x,z,q,j,R,Y,H,V,W,J,X,Q,Z,$,ee,te,ie,ae,oe,ne,re,le;n._RF.push({},"ceb63uWNClCqYEW4TwF9Dt0","GameCtrl",void 0);var se=r.ccclass,de=r.property;e("GameCtrl",(k=se("GameCtrl"),G=de({type:l}),K=de({type:l}),L=de({type:l}),F=de({type:l}),x=de({type:l}),z=de({type:l}),q=de({type:l}),j=de({type:l}),R=de({type:l}),Y=de({type:l}),H=de({type:l}),V=de({type:l}),k((X=t((J=function(t){function n(){for(var e,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return e=t.call.apply(t,[this].concat(n))||this,a(e,"topUINode",X,o(e)),a(e,"paddleMgrNode",Q,o(e)),a(e,"gameOverNode",Z,o(e)),a(e,"gameClearNode",$,o(e)),a(e,"certificateNode",ee,o(e)),a(e,"bonusCompleteNode",te,o(e)),a(e,"brickLayer",ie,o(e)),a(e,"playIntroEffNode",ae,o(e)),a(e,"defenseBrickNode",oe,o(e)),a(e,"stageAlertNode",ne,o(e)),a(e,"ballMgrNode",re,o(e)),a(e,"gameBgNode",le,o(e)),e.canvas=null,e.isPlaying=!1,e.screen_width=0,e.screen_height=0,e.paddle_move_min=0,e.paddle_move_max=0,e.isNotiSaveScore=!1,e.isFirstAllClear=0,e.rewardDiamond=0,e.topUI=null,e.paddleMgr=null,e.brickObjPool=null,e.ballMgr=null,e.gameBgTmpPosition=[0,0],e.gameBgSpeed=15,e}i(n,t);var r=n.prototype;return r.onLoad=function(){var t=this;e("GAMECTRL",this),S.getPlayMode()===b.INFINITE?this.gameBgNode[2].active=!1:(this.gameBgNode[0].active=!1,this.gameBgNode[1].active=!1),s.load("data/balance_item",d,(function(e,i){if(e){console.log("Failed to load json file : ",e);S.setBalanceItemData({pouch_diamond_cnt:10,pouch_token_cnt:100,bonus_score:10,life_ball_cnt:1,gun_sec:10,huge_ball_sec:10,defense_brick_sec:10})}else{var a=i.json;S.setBalanceItemData(a)}t.initListener();var o=g.getScene();if(t.canvas=o.getComponentInChildren(c),t.screen_width=t.canvas.getComponent(h).width,t.screen_height=t.canvas.getComponent(h).height,t.paddleMgr=t.paddleMgrNode.getComponent(P),t.paddleMgr.init(),t.setPaddleWidth(),t.brickObjPool=t.brickLayer.getComponent(M),t.brickObjPool.init(),t.ballMgr=t.ballMgrNode.getComponent(A),t.ballMgr.init(),t.topUI=t.topUINode.getComponent(T),t.topUI.init(),t.topUI.utUI(E.LIFE,t.ballMgr.getPaddleBallCnt(),!1),S.getPlayMode()===b.STAGE){var n=S.tutorial?S.getTutorialStage():S.getCurStage();t.topUI.utUI(E.STAGE,n,!1)}else if(S.getPlayMode()===b.INFINITE){var r=S.getServerData().id,l=S.getPassword(),s=Math.floor((new Date).getTime()/1e3);D.reqInfiniteStart(r,l,s,(function(e){"0"===e.returnCode&&S.setEcKey(String(e.date))}))}S.tutorial&&t.topUI.hideBonusStr(),t.setPlayIntroShow()}))},r.setPlayIntroShow=function(){var e=this;this.playIntroEffNode[0].active=!0,this.playIntroEffNode[1].active=!0,u(this.node).delay(.5).call((function(){if(e.playIntroEffectOut(),e.paddleMgr.setBallDirection(!0,!1),e.stageAlertNode.active=!0,S.tutorial){var t="Stage"+S.getTutorialStage();e.stageAlertNode.getChildByName("Tutorial").getChildByName(t).active=!0}else if(S.getPlayMode()===b.STAGE){var i=e.stageAlertNode.getChildByName("Stage");null!==i&&(i.getChildByName(S.getCurStage().toString()).active=!0)}else S.getPlayMode()===b.INFINITE&&(e.stageAlertNode.getChildByName("Infinite").active=!0,e.paddleMgr.setBallDirection(!0,!0),e.isPlaying=!0);S.getPlayMode()===b.STAGE?u(e.stageAlertNode).delay(2).call((function(){if(!1===S.tutorial){var t=e.stageAlertNode.getChildByName("Stage");null!==t&&(t.getChildByName(S.getCurStage().toString()).active=!1)}e.stageAlertNode.active=!1,e.paddleMgr.setBallDirection(!0,!0),e.isPlaying=!0})).start():u(e.stageAlertNode).delay(1.5).call((function(){e.stageAlertNode.active=!1})).start()})).start()},r.playIntroEffetIn=function(){var e=this;this.playIntroEffNode[0].active=!0,u(this.playIntroEffNode[0].position).to(.3,new p(0,0,0),{easing:"smooth",onUpdate:function(t,i){e.playIntroEffNode[0].position=t}}).start(),this.playIntroEffNode[1].active=!0,u(this.playIntroEffNode[1].position).to(.3,new p(0,0,0),{easing:"smooth",onUpdate:function(t,i){e.playIntroEffNode[1].position=t}}).start()},r.playIntroEffectOut=function(){var e=this;u(this.playIntroEffNode[0].position).to(.3,new p(-this.screen_width/2,0,0),{easing:"smooth",onUpdate:function(t,i){e.playIntroEffNode[0].position=t}}).call((function(){e.playIntroEffNode[0].active=!1})).start(),u(this.playIntroEffNode[1].position).to(.3,new p(this.screen_width/2,0,0),{easing:"smooth",onUpdate:function(t,i){e.playIntroEffNode[1].position=t}}).call((function(){e.playIntroEffNode[1].active=!1})).start()},r.setPaddleWidth=function(){var e=this.paddleMgr.getContentWidth()/2;this.paddle_move_min=e-this.screen_width/2,this.paddle_move_max=this.screen_width/2-e},r.initListener=function(){var e=this;f.on(m.EventType.TOUCH_START,this.onTouchStart,this),f.on(m.EventType.TOUCH_MOVE,this.onPaddleMove,this),f.on(m.EventType.MOUSE_MOVE,this.onPaddleMove,this),f.on(m.EventType.KEY_DOWN,this.onKeyStart,this);var t=this.gameClearNode.getChildByName("BtnNext").getComponent(N);S.tutorial&&t.node.setPosition(0,t.node.position.y),t.node.on(N.EventType.CLICK,(function(){S.nextStage(),S.tutorial?(_.nextScene("tutorial",!0),S.tutorial&&S.setTutorialDiamond(S.getTutorialDiamond()+e.getTopUIDiamond())):e.nextStageEffect()}),this),this.gameClearNode.getChildByName("BtnFinish").getComponent(N).node.on(N.EventType.CLICK,(function(){e.procCertificate()}),this);var i=this.gameClearNode.getChildByName("BtnRetry").getComponent(N);S.tutorial?i.node.active=!1:i.node.on(N.EventType.CLICK,(function(){e.resetGame(!1)}),this);var a=this.gameClearNode.getChildByName("BtnHome").getComponent(N);S.tutorial?a.node.active=!1:a.node.on(N.EventType.CLICK,(function(){e.reqUserInfo()}),this),this.gameOverNode.getChildByName("BtnRetry").getComponent(N).node.on(N.EventType.CLICK,(function(){if(S.getPlayMode()===b.INFINITE){var t=e.gameOverNode.getChildByName("Infinite");t.getChildByName("Normal").active=!1,t.getChildByName("Best").active=!1,t.active=!1}e.resetGame(!1)}),this),this.gameOverNode.getChildByName("BtnHome").getComponent(N).node.on(N.EventType.CLICK,(function(){if(S.tutorial)0===S.getEarnedToken()&&S.setEarnedToken(10),S.setTutorialDiamond(S.getTutorialDiamond()+e.getTopUIDiamond()),_.nextScene("tutorial",!0);else if(S.getPlayMode()===b.INFINITE)if(!0===e.isNotiSaveScore){new O(w.YES_OR_NO,"NOTIFICATIONS","<size=33><b>To save your BEST SCORE,\n\nvisit the leaderboard!</b></size>\n\n\nWould you like to proceed?",(function(t){if("YES"===t){e.isNotiSaveScore=!1;var i=String(S.getServerData().leaderboardUri);window.open(i,"_blank")}else"NO"===t&&e.reqUserInfo()})).open()}else e.reqUserInfo();else e.reqUserInfo()}),this),this.gameOverNode.getChildByName("Infinite").getChildByName("BtnLeaderboard").getComponent(N).node.on(N.EventType.CLICK,(function(){setTimeout((function(){e.isNotiSaveScore=!1;var t=String(S.getServerData().leaderboardUri);window.open(t,"_blank")}),200)}),this)},r.onTouchStart=function(e){if(this.isPlaying&&!1===this.ballMgr.getBallStop()){var t=new p(this.paddleMgr.node.position.x,this.paddleMgr.node.position.y+40,0);this.ballMgr.createBall(this.canvas.node,!1,t,this.paddleMgr),S.getPlayMode()===b.STAGE&&(1===S.getCurStage()||S.tutorial)&&(this.paddleMgr.setVisibleShotInfo(0,!1),this.paddleMgr.setVisibleShotInfo(1,!0))}},r.onPaddleMove=function(e){if(this.isPlaying){var t=e.getUILocation().x-this.screen_width/2;t=Math.max(this.paddle_move_min,t),t=Math.min(t,this.paddle_move_max),this.paddleMgr.setPosition(t)}},r.onKeyStart=function(e){switch(e.keyCode){case y.ESCAPE:this.ballMgr.moveStopBall(),this.procGameOver();break;case y.KEY_N:1===S.getServerData().isCheat&&S.getPlayMode()===b.STAGE&&(this.ballMgr.moveStopBall(),this.procGameClear());break;case y.KEY_X:1===S.getServerData().isCheat&&this.paddleMgr.setImmortal(!0);break;case y.KEY_C:1===S.getServerData().isCheat&&this.paddleMgr.setImmortal(!1);break;case y.KEY_B:1===S.getServerData().isCheat&&this.updateLife(1);break;case y.KEY_H:1===S.getServerData().isCheat&&this.ballMgr.hugeBall();break;case y.KEY_D:1===S.getServerData().isCheat&&this.defenseBrick();break;case y.KEY_G:1===S.getServerData().isCheat&&this.bulletPaddle()}},r.resetGame=function(e){if(v.stopAll(),S.getPlayMode()===b.INFINITE&&(this.gameBgNode[0].setPosition(0,0),this.gameBgNode[1].setPosition(0,this.screen_height)),this.gameBgTmpPosition[0]=0,this.gameBgTmpPosition[1]=0,this.ballMgr.destroyAllBall(),S.getPlayMode()===b.STAGE){var t=S.tutorial?S.getTutorialStage():S.getCurStage();this.topUI.utUI(E.STAGE,t,!1)}else if(S.getPlayMode()===b.INFINITE){var i=S.getServerData().id,a=S.getPassword(),o=Math.floor((new Date).getTime()/1e3);D.reqInfiniteStart(i,a,o,(function(e){"0"===e.returnCode&&S.setEcKey(String(e.date))}))}this.gameOverNode.active=!1,this.gameClearNode.active=!1,this.brickObjPool.resetBricks(),this.ballMgr.reset(),this.isPlaying=!0,this.paddleMgr.resetPaddle(),this.paddleMgr.setBallDirection(!0,!e),this.topUI.resetTopUI(!0,!0,!0),this.topUI.utUI(E.LIFE,this.ballMgr.getPaddleBallCnt(),!1)},r.procGameOver=function(){var e=this;this.isPlaying&&(this.isPlaying=!1,this.paddleMgr.setBallDirection(!1,!1),this.paddleMgr.setVisibleShotInfo(0,!1),this.paddleMgr.setVisibleShotInfo(1,!1),this.ballMgr.moveStopBall(),this.brickObjPool.getItemMgr().setItemsStop(!0),this.brickObjPool.stopBricks(),S.getPlayMode()===b.STAGE&&u(this.node).delay(.8).call((function(){e.gameOverNode.active=!0,e.gameOverNode.setSiblingIndex(9990),e.gameOverNode.getChildByName("Stage").active=!0,S.tutorial&&(e.gameOverNode.getChildByName("BtnHome").getChildByName("Label").getComponent(I).string="SKIP")})).start())},r.procGameClear=function(){var e=this;this.isPlaying&&(this.isPlaying=!1,this.paddleMgr.resetBullet(),this.paddleMgr.setVisibleShotInfo(0,!1),this.paddleMgr.setVisibleShotInfo(1,!1),this.paddleMgr.setBallDirection(void 0,!1),!1===S.tutorial?(S.getCurStage()===B&&(this.gameClearNode.getChildByName("BtnFinish").active=!0,this.gameClearNode.getChildByName("BtnNext").active=!1),this.reqSaveData()):u(this.node).delay(.5).call((function(){e.gameClearNode.active=!0,e.gameClearNode.setSiblingIndex(9990)})).start())},r.procCertificate=function(){var e=this;this.isPlaying=!1,this.ballMgr.destroyAllBall(),this.gameClearNode.active=!1,this.certificateNode.active=!0,this.certificateNode.setSiblingIndex(9990),this.certificateNode.getChildByName("UI_Name").getChildByName("Label").getComponent(I).string=String(S.getServerData().id),this.certificateNode.getChildByName("Descript").getComponent(I).string="This certificate grants your qualification for a top-level Paddle.\nUse your certificate to convert DIAMOND and mint the ultimate NFT.";var t=this.certificateNode.getChildByName("Stemp");if(t.getChildByName("BtnHome").getComponent(N).node.on(N.EventType.CLICK,(function(){e.reqUserInfo()}),this),t.getChildByName("BtnNft").getComponent(N).node.on(N.EventType.CLICK,(function(){setTimeout((function(){var e=String(S.getServerData().toolPageUri);window.open(e,"_blank")}),200)}),this),1===this.isFirstAllClear){var i="<size=33><b>Congratulations\n\nYou've completed all stages!</b></size>\n\n\nHere's "+U.insertCommas(this.rewardDiamond)+" DIAMOND as a reward\n※ It's a one-time reward";new O(w.OK,"Qualification Approved",i).open()}},r.nextStageEffect=function(){var e=this;this.gameOverNode.active=!1,this.gameClearNode.active=!1,this.ballMgr.destroyAllBall(),this.playIntroEffetIn(),u(this.node).delay(.5).call((function(){e.nextGame()})).start()},r.nextGame=function(){this.resetGame(!0),this.setPlayIntroShow()},r.isPlayingNow=function(){return this.isPlaying},r.getTopUIPos=function(e){return this.topUI.getTopUIPos(e)},r.getTUSC=function(){return this.topUI.getCS()},r.getTopUIDiamond=function(){return this.topUI.getEarnedDiamond()},r.us=function(e,t){this.isPlaying&&this.topUI.utUI(E.SC,e,t)},r.updateToken=function(e){this.isPlaying&&this.topUI.utUI(E.TOKEN,e,!0)},r.updateDiamond=function(e){this.isPlaying&&this.topUI.utUI(E.DIAMOND,e,!0)},r.updateLife=function(e){if(this.isPlaying){this.ballMgr.addPaddleBallCnt(e);var t=this.ballMgr.getPaddleBallCnt();this.topUI.utUI(E.LIFE,t,!0),t>0&&this.isPlaying&&this.paddleMgr.setBallDirection(!0,!0)}},r.updateBonusStr=function(e){this.isPlaying&&(this.topUI.utUI(E.BONUS_STR,e,!0),this.checkBonusComplete())},r.bulletPaddle=function(){this.isPlayingNow()&&!1===this.ballMgr.getBallStop()&&this.paddleMgr.createBullet()},r.getPaddles=function(){return this.paddleMgr.getPaddles()},r.defenseBrick=function(){this.brickObjPool.createDefenseBricks()},r.checkBonusComplete=function(){this.isPlaying&&this.topUI.isCompleteBonusStr()&&this.procBonusComplete()},r.procBonusComplete=function(){var e=this;this.bonusCompleteNode.active=!0,this.topUI.utUI(E.DIAMOND,250,!0),setTimeout((function(){e.topUI.resetBonusStr(),e.bonusCompleteNode.active=!1}),2e3)},r.reqSaveData=function(){var e=this,t=this.getTopUIDiamond();if(S.getPlayMode()===b.STAGE){var i=S.getCurStage(),a=S.getServerData().id,o=S.getPassword(),n={value1:Math.floor((new Date).getTime()/1e3),value2:i,value3:t},r=JSON.stringify(n),l=U.padEnd(a,32,"0");U.getEncrypt(l,r).then((function(t){D.reqStageClear(a,o,String(t),(function(t){"0"===t.returnCode?(e.isFirstAllClear=t.isFirstAllClear,e.rewardDiamond=t.rewardDiamond,u(e.node).delay(.5).call((function(){e.gameClearNode.active=!0,e.gameClearNode.setSiblingIndex(9990)})).start()):new O(w.OK,"NOTIFICATIONS","A server error has occurred\n("+t.returnMsg+")").open()}))}))}else if(S.getPlayMode()===b.INFINITE){var s=this.getTUSC(),d=S.getServerData().id,g=S.getPassword(),c={value1:Math.floor((new Date).getTime()/1e3),value2:s,value3:t,value4:this.brickObjPool.getItemMgr().getItemScBonusCnt()},h=JSON.stringify(c);U.getEncrypt(S.getEcKey(),h).then((function(t){D.reqInfiniteEnd(d,g,String(t),(function(t){"0"===t.returnCode?u(e.node).delay(.8).call((function(){e.gameOverNode.active=!0,e.gameOverNode.setSiblingIndex(9990),e.gameOverNode.getChildByName("Bg").active=!1;var i=e.gameOverNode.getChildByName("Infinite");i.active=!0,1===t.isBestScore?(e.isNotiSaveScore=!0,i.getChildByName("Best").active=!0):i.getChildByName("Normal").active=!0;var a=U.insertCommas(e.getTUSC());i.getChildByName("Score").getComponent(I).string=a})).start():new O(w.OK,"NOTIFICATIONS","A server error has occurred\n("+t.returnMsg+")").open()}))}))}},r.reqUserInfo=function(){var e=Number(S.getServerData().pid);D.reqUserInfo(e,(function(e){"0"===e.returnCode?(S.setServerData(e),_.nextScene("home",!1)):new O(w.OK,"NOTIFICATIONS","A server error has occurred\n("+e.returnMsg+")").open()}))},r.getPaddleMgrPos=function(){return this.paddleMgr.getPos()},r.update=function(e){if(S.getPlayMode()===b.INFINITE&&this.isPlaying){for(var t=0;t<2;t++)this.gameBgTmpPosition[t]=this.gameBgNode[t].position.y,this.gameBgTmpPosition[t]-=this.gameBgSpeed*e,this.gameBgNode[t].setPosition(0,this.gameBgTmpPosition[t]);this.gameBgNode[0].position.y<=-this.screen_height&&(this.gameBgNode[0].setPosition(0,0),this.gameBgNode[1].setPosition(0,this.screen_height),this.gameBgTmpPosition[0]=0,this.gameBgTmpPosition[1]=0)}},n}(C)).prototype,"topUINode",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=t(J.prototype,"paddleMgrNode",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=t(J.prototype,"gameOverNode",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=t(J.prototype,"gameClearNode",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=t(J.prototype,"certificateNode",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=t(J.prototype,"bonusCompleteNode",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ie=t(J.prototype,"brickLayer",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ae=t(J.prototype,"playIntroEffNode",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),oe=t(J.prototype,"defenseBrickNode",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=t(J.prototype,"stageAlertNode",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),re=t(J.prototype,"ballMgrNode",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),le=t(J.prototype,"gameBgNode",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),W=J))||W)),e("GAMECTRL",null);n._RF.pop()}}}));

System.register("chunks:///_virtual/GameData.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n;return{setters:[function(t){e=t.createClass},function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"f863dqHSShP5qo06QocElzc","GameData",void 0);var i=t("PlayMode",function(t){return t[t.STAGE=0]="STAGE",t[t.INFINITE=1]="INFINITE",t}({})),a=(t("ColliderTag",function(t){return t[t.BALL=0]="BALL",t[t.WALL=1]="WALL",t[t.BRICK=2]="BRICK",t[t.PADDLE=3]="PADDLE",t[t.BALL_OUT=4]="BALL_OUT",t[t.BRICK_ALLY=5]="BRICK_ALLY",t[t.ITEM=6]="ITEM",t[t.BALL_ENEMY=7]="BALL_ENEMY",t[t.BULLET=8]="BULLET",t}({})),t("STAGE_MAX",20)),r=t("GameData",function(){function t(){this.playMode=i.STAGE,this.curStage=0,this.earnToken=0,this.paddleAttr=void 0,this.balanceItemData=void 0,this.serverData=void 0,this.password=null,this.isTutorial=!1,this.tutorialStage=0,this.tutorialStep=0,this.tutorialAddress=null,this.tutorialMnemonic=null,this.tutorialDiamond=0,this.ecKey=null}t.getInstance=function(){return null===t.instance&&(t.instance=new t),t.instance};var n=t.prototype;return n.getPlayMode=function(){return this.playMode},n.setPlayMode=function(t){this.playMode=t},n.setPaddleAttr=function(t){var e=this;this.paddleAttr={paddle_width:100,paddle_count:1,ball_count:3},t.length>0&&t.forEach((function(t){switch(t.trait_type){case"paddle_width":e.paddleAttr.paddle_width=parseInt(t.value);break;case"paddle_count":e.paddleAttr.paddle_count=parseInt(t.value);break;case"ball_count":e.paddleAttr.ball_count=parseInt(t.value)}}))},n.getPaddleAttr=function(){return this.paddleAttr},n.setBalanceItemData=function(t){this.balanceItemData=t},n.getBalanceItemData=function(){return this.balanceItemData},n.setServerData=function(t){this.serverData=t},n.getServerData=function(){return this.serverData},n.setPassword=function(t){this.password=t},n.getPassword=function(){return this.password},n.getCurStage=function(){return this.curStage},n.setCurStage=function(t){this.curStage=t},n.nextStage=function(){if(this.getCurStage()<a){var t=this.getCurStage()+1;this.curStage=t}},n.getEarnedToken=function(){return this.earnToken},n.setEarnedToken=function(t){this.earnToken=t},n.addEarnedToken=function(t){return this.earnToken+=t,this.earnToken},n.initTutorial=function(){this.isTutorial=!0,this.tutorialStage=1,this.tutorialStep=0,this.playMode=i.STAGE,this.earnToken=0,this.setPaddleAttr([])},n.getTutorialStage=function(){return this.tutorialStage},n.setTutorialStage=function(t){this.tutorialStage=t},n.getTutorialStep=function(){return this.tutorialStep},n.setTutorialStep=function(t){this.tutorialStep=t},n.getTutorialAddress=function(){return this.tutorialAddress},n.setTutorialAddress=function(t){this.tutorialAddress=t},n.getTutorialMnemonic=function(){return this.tutorialMnemonic},n.setTutorialMnemonic=function(t){this.tutorialMnemonic=t},n.getTutorialDiamond=function(){return this.tutorialDiamond},n.setTutorialDiamond=function(t){this.tutorialDiamond=t},n.resetTutorial=function(){this.isTutorial=!1,this.tutorialStage=1,this.tutorialStep=0},n.setEcKey=function(t){this.ecKey="BreakTheBrick"+t},n.getEcKey=function(){return this.ecKey},e(t,[{key:"tutorial",get:function(){return this.isTutorial},set:function(t){this.isTutorial=t}}]),t}());r.instance=null;t("GAMEDATA",r.getInstance());n._RF.pop()}}}));

System.register("chunks:///_virtual/Home.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Wallet.ts","./Popup.ts","./SceneMgr.ts","./GameData.ts"],(function(e){var t,n,o,i,r,l,a,u,c,p,s,f,b,y,d,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,l=e._decorator,a=e.Node,u=e.Button,c=e.Tween,p=e.Component},function(e){s=e.Wallet},function(e){f=e.Popup,b=e.PopupType},function(e){y=e.SCENEMGR},function(e){d=e.GAMEDATA,g=e.PlayMode}],execute:function(){var N,m,h,S,v,w,I,T,C,z,P,L,E;r._RF.push({},"b7477q90L5HsYfz9LoIn4rZ","Home",void 0);var A=l.ccclass,H=l.property;e("Home",(N=A("Home"),m=H({type:a}),h=H({type:a}),S=H({type:u}),v=H({type:u}),w=H({type:u}),N((C=t((T=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return t=e.call.apply(e,[this].concat(r))||this,o(t,"walletNode",C,i(t)),o(t,"stageSelectNode",z,i(t)),o(t,"btnInfinity",P,i(t)),o(t,"btnStage",L,i(t)),o(t,"btnBack",E,i(t)),t}n(t,e);var r=t.prototype;return r.onLoad=function(){var e=this;d.setTutorialStage(0),this.btnInfinity.node.on(u.EventType.CLICK,(function(){!1===e.walletNode.getComponent(s).isSltNft()?e.errPopup():(c.stopAll(),d.setPlayMode(g.INFINITE),y.nextScene("game",!1))}),this),this.btnStage.node.on(u.EventType.CLICK,(function(){!1===e.walletNode.getComponent(s).isSltNft()?e.errPopup():setTimeout((function(){e.walletNode.active=!1,e.stageSelectNode.active=!0}),200)}),this),this.btnBack.node.on(u.EventType.CLICK,(function(){e.walletNode.active=!0,e.stageSelectNode.active=!1}),this)},r.errPopup=function(){new f(b.OK,"NOTIFICATIONS","<color=#000000><size=33><b>Select the paddle</b></size>\n\n\nYou need to select\na paddle to play the game!</color>").open()},t}(p)).prototype,"walletNode",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(T.prototype,"stageSelectNode",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(T.prototype,"btnInfinity",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(T.prototype,"btnStage",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(T.prototype,"btnBack",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=T))||I));r._RF.pop()}}}));

System.register("chunks:///_virtual/Item.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ItemMgr.ts","./Paddle.ts","./Brick.ts","./GameData.ts"],(function(t){var e,o,n,i,s,r,a,c,d,l,_,u,p,h;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,n=t._decorator,i=t.BoxCollider2D,s=t.Contact2DType,r=t.RigidBody2D,a=t.tween,c=t.Vec3,d=t.ERigidBody2DType,l=t.Component},function(t){_=t.ItemMgr},function(t){u=t.Paddle},function(t){p=t.Brick},function(t){h=t.ColliderTag}],execute:function(){var m;o._RF.push({},"2e2adIIZnpFBY8Y7dTq6ikg","Item",void 0);var g=n.ccclass,B=(n.property,t("ItemType",function(t){return t[t.COIN_POUCH=0]="COIN_POUCH",t[t.HUGE_BALL=1]="HUGE_BALL",t[t.PADDLE_GUN=2]="PADDLE_GUN",t[t.LIFE=3]="LIFE",t[t.BOMB=4]="BOMB",t[t.BONUS_STR_X=5]="BONUS_STR_X",t[t.BONUS_STR_P=6]="BONUS_STR_P",t[t.BONUS_STR_L=7]="BONUS_STR_L",t[t.BONUS_STR_A=8]="BONUS_STR_A",t[t.SU=9]="SU",t[t.GAME_TOKEN_POUCH=10]="GAME_TOKEN_POUCH",t[t.DEFENSE_BRICK=11]="DEFENSE_BRICK",t[t.MAX=12]="MAX",t}({})));t("Item",g("Item")(m=function(t){function o(){for(var e,o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))||this).itemType=0,e.isTweenAction=!1,e.targetPos=null,e.isGetProc=!1,e.isAutoGet=!1,e.itemMgr=null,e}e(o,t);var n=o.prototype;return n.onLoad=function(){this.itemMgr=this.node.parent.getComponent(_),this.node.getComponent(i).on(s.BEGIN_CONTACT,this.onBeginContact,this)},n.setProperty=function(t,e,o){this.itemType=t,this.node.setPosition(e),this.targetPos=o},n.onBeginContact=function(t,e,o){if(e.tag===h.PADDLE)this.node.getComponent(r).destroy(),this.itemGetProc(e),this.isAutoGet=!1;else if(e.tag===h.BRICK_ALLY){var n=e.node.getComponent(p);null!==n&&(n.damage(),this.node.destroy())}else e.tag===h.BALL_OUT&&t.node.destroy()},n.itemGetProc=function(t){var e=this;switch(this.isGetProc=!0,this.itemType){case B.COIN_POUCH:case B.LIFE:case B.BONUS_STR_X:case B.BONUS_STR_P:case B.BONUS_STR_L:case B.BONUS_STR_A:case B.SU:case B.GAME_TOKEN_POUCH:this.isTweenAction=!0,a(this.node.position).to(.5,this.targetPos,{easing:"quadIn",onUpdate:function(t,o){null!==e.node&&(e.node.position=t)}}).call((function(){try{e.node.isValid&&(e.itemMgr.procItem(e.itemType),e.node.destroy())}catch(t){console.log("item error = ",t)}})).start();break;case B.HUGE_BALL:case B.PADDLE_GUN:case B.DEFENSE_BRICK:this.node.getComponent(r).enabledContactListener=!1,a(this.node).to(.2,{scale:new c(2,2,0)}).call((function(){e.itemMgr.procItem(e.itemType),e.node.destroy()})).start();break;case B.BOMB:var o=t.node.getComponent(u);!1===o.isImmortal()&&o.bombPaddle(!0),this.node.destroy()}},n.stopItem=function(t){if(!1===this.isTweenAction){var e=this.node.getComponent(r);null!==e&&(e.gravityScale=t?0:.2,e.type=t?d.Static:d.Dynamic)}},n.setAutoGet=function(){var t=this;if(this.itemType===B.BOMB)a(this.node).to(.5,{scale:new c(.1,.1,0)}).call((function(){t.node.destroy()})).start();else{this.isAutoGet=!0;var e=this.node.getComponent(r);e&&(e.gravityScale=2)}},n.isItemGetProc=function(){return this.isGetProc},n.update=function(t){if(this.isAutoGet){var e=this.itemMgr.getPaddleMgrPos().clone().subtract(this.node.position).normalize().multiplyScalar(10),o=this.node.position.x+e.x;this.node.setPosition(new c(o,this.node.position.y,0))}},o}(l))||m);o._RF.pop()}}}));

System.register("chunks:///_virtual/ItemMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Utils.ts","./Item.ts","./GameCtrl.ts","./GameData.ts"],(function(t){var e,i,n,a,s,r,c,o,m,u,h,l,f,p,_,C;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){s=t.cclegacy,r=t._decorator,c=t.Prefab,o=t.instantiate,m=t.tween,u=t.Vec3,h=t.Component},function(t){l=t.UTILS},function(t){f=t.Item,p=t.ItemType},function(t){_=t.GAMECTRL},function(t){C=t.GAMEDATA}],execute:function(){var I,d,g,S,T;s._RF.push({},"af34aivDOFLkpfaeCCs5iJq","ItemMgr",void 0);var E=r.ccclass,k=r.property;t("ItemMgr",(I=E("ItemMgr"),d=k({type:c}),I((T=e((S=function(t){function e(){for(var e,i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return e=t.call.apply(t,[this].concat(s))||this,n(e,"items",T,a(e)),e.itemTotalRate=void 0,e.itemEachRate=void 0,e.itemExistCheck=!1,e.itemChkTime=0,e.itemScBonusCnt=0,e}i(e,t);var s=e.prototype;return s.resetItemMgr=function(){this.itemScBonusCnt=0},s.setItemMgrInfo=function(t,e){this.itemTotalRate=t,this.itemEachRate=e,this.itemExistCheck=!1,this.itemChkTime=0},s.createItem=function(t){var e=this;if(this.itemTotalRate>0){var i=l.getRandomInt(1,100);if(i<=this.itemTotalRate){i=l.getRandomInt(1,100);for(var n=0,a=0,s=0;s<this.itemEachRate.length;s++){var r=this.itemEachRate[s];if(i<=r+n){a=s;break}n+=r}var c=o(this.items[a]);return m(c).delay(.2).call((function(){e.node.addChild(c),c.getComponent(f).setProperty(a,t,e.targetPos(a))})).start(),a}return-1}return-1},s.setItemsStop=function(t){this.node.getComponentsInChildren(f).forEach((function(e){e&&e.stopItem(t)}))},s.procItem=function(t){switch(t){case p.COIN_POUCH:var e=C.getBalanceItemData().pouch_diamond_cnt;_.updateDiamond(e);break;case p.GAME_TOKEN_POUCH:var i=C.getBalanceItemData().pouch_token_cnt;_.updateToken(i);break;case p.HUGE_BALL:_.ballMgr.hugeBall();break;case p.PADDLE_GUN:_.bulletPaddle();break;case p.LIFE:var n=C.getBalanceItemData().life_ball_cnt;_.updateLife(n);break;case p.BONUS_STR_X:case p.BONUS_STR_P:case p.BONUS_STR_L:case p.BONUS_STR_A:_.updateBonusStr(t-p.BONUS_STR_X);break;case p.SU:var a=C.getBalanceItemData().bonus_score;this.itemScBonusCnt++,_.us(a,!0);break;case p.DEFENSE_BRICK:_.defenseBrick()}},s.targetPos=function(t){switch(t){case p.COIN_POUCH:case p.LIFE:case p.BONUS_STR_X:case p.BONUS_STR_P:case p.BONUS_STR_L:case p.BONUS_STR_A:case p.SU:case p.GAME_TOKEN_POUCH:return _.getTopUIPos(t)}return new u(0,0,0)},s.checkItemExist=function(){return this.node.getComponentsInChildren(f).length>0&&(this.itemExistCheck=!0,!0)},s.getPaddleMgrPos=function(){return _.getPaddleMgrPos()},s.setItemAutoGet=function(){this.node.getComponentsInChildren(f).forEach((function(t){t&&!1===t.isItemGetProc()&&t.setAutoGet()}))},s.update=function(t){this.itemExistCheck&&_.isPlayingNow()&&(this.itemChkTime+=t,this.itemChkTime>=1&&(this.itemChkTime=0,!1===this.checkItemExist()&&(_.procGameClear(),this.itemExistCheck=!1)))},s.getItemScBonusCnt=function(){return this.itemScBonusCnt},e}(h)).prototype,"items",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),g=S))||g));s._RF.pop()}}}));

System.register("chunks:///_virtual/LogIn.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Popup.ts","./NetworkMgr.ts","./GameData.ts","./SceneMgr.ts"],(function(n){var e,t,o,i,r,u,a,l,c,p,s,g,d,f,b,w,h;return{setters:[function(n){e=n.applyDecoratedDescriptor,t=n.inheritsLoose,o=n.initializerDefineProperty,i=n.assertThisInitialized},function(n){r=n.cclegacy,u=n._decorator,a=n.Toggle,l=n.Button,c=n.EditBox,p=n.Sprite,s=n.Color,g=n.Component},function(n){d=n.Popup,f=n.PopupType},function(n){b=n.NETWORKMGR},function(n){w=n.GAMEDATA},function(n){h=n.SCENEMGR}],execute:function(){var y,m,x,B,T,I,C,L,E,v,S,z,N,P,O;r._RF.push({},"09626zL9opPlYx4o5LSR+w9","LogIn",void 0);var R=u.ccclass,A=u.property;n("LogIn",(y=R("LogIn"),m=A({type:a}),x=A({type:l}),B=A({type:l}),T=A({type:l}),I=A({type:c}),C=A({type:c}),y((v=e((E=function(n){function e(){for(var e,t=arguments.length,r=new Array(t),u=0;u<t;u++)r[u]=arguments[u];return e=n.call.apply(n,[this].concat(r))||this,o(e,"togglePw",v,i(e)),o(e,"btnLogin",S,i(e)),o(e,"btnNew",z,i(e)),o(e,"btnBack",N,i(e)),o(e,"idBox",P,i(e)),o(e,"pwBox",O,i(e)),e}t(e,n);var r=e.prototype;return r.onLoad=function(){var n=this;window.matchMedia("(prefers-color-scheme: dark)").matches&&(this.idBox.node.on("editing-did-began",(function(){n.idBox.getComponent(p).color=new s(151,151,151)}),this),this.idBox.node.on("editing-did-ended",(function(){n.idBox.getComponent(p).color=s.WHITE}),this),this.pwBox.node.on("editing-did-began",(function(){n.pwBox.getComponent(p).color=new s(151,151,151)}),this),this.pwBox.node.on("editing-did-ended",(function(){n.pwBox.getComponent(p).color=s.WHITE}),this)),this.btnLogin.node.on(l.EventType.CLICK,(function(){n.reqLogin()})),this.togglePw.node.on("toggle",(function(e){e.isChecked?n.pwBox.inputFlag=0:n.pwBox.inputFlag=5}),this),this.btnNew.node.on(l.EventType.CLICK,(function(){new d(f.YES_OR_NO,"NOTIFICATION","<size=33><b>To sign up, you need to\n\nplay 'START HERE' mode</b></size>\n\n\nPress YES to jump to 'START HERE'",(function(n){"YES"===n&&(w.initTutorial(),h.nextScene("game",!1))})).open()}),this),this.btnBack.node.on(l.EventType.CLICK,(function(){h.nextSceneDirectly("menu")}),this)},r.reqLogin=function(){var n=this.idBox.string;if(""===n||void 0===n)return new d(f.OK,"NOTIFICATIONS","ID must not be empty").open(),!1;var e=this.pwBox.string;b.reqLogin(n,e,(function(n){if("0"===n.returnCode)w.setPassword(e),w.tutorial=!1,w.setServerData(n),h.nextScene("home",!1);else{var t="<size=33><b>"+n.returnMsg+"\n\n\n</b></size>";t+="Please check and try again.",new d(f.OK,"NOTIFICATIONS",t).open()}}))},e}(g)).prototype,"togglePw",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(E.prototype,"btnLogin",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(E.prototype,"btnNew",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=e(E.prototype,"btnBack",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(E.prototype,"idBox",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=e(E.prototype,"pwBox",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=E))||L));r._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./debug-view-runtime-control.ts","./Ball.ts","./BallMgr.ts","./Brick.ts","./BricksObjectPool.ts","./Bullet.ts","./GameCtrl.ts","./GameData.ts","./Home.ts","./Item.ts","./ItemMgr.ts","./LogIn.ts","./MainMenu.ts","./NetworkMgr.ts","./Paddle.ts","./PaddleMgr.ts","./Persistant.ts","./Popup.ts","./SceneMgr.ts","./SignUp.ts","./StageSelect.ts","./TopUI.ts","./TutorialMgr.ts","./Utils.ts","./Wallet.ts","./XplaJs.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MainMenu.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SceneMgr.ts","./GameData.ts","./Popup.ts"],(function(e){var t,n,i,o,a,r,l,s,u,c,p,b,f,d,h,y,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){a=e.cclegacy,r=e._decorator,l=e.Node,s=e.Button,u=e.Label,c=e.Tween,p=e.tween,b=e.Vec3,f=e.Component},function(e){d=e.SCENEMGR},function(e){h=e.GAMEDATA},function(e){y=e.Popup,g=e.PopupType}],execute:function(){var v,m,A,T,w,N,C,I,E,z,M,L,O,R,S;a._RF.push({},"5e13fIsEL1ClKRLk26qeImb","MainMenu",void 0);var D=r.ccclass,P=r.property;e("MainMenu",(v=D("MainMenu"),m=P({type:l}),A=P({type:l}),T=P({type:s}),w=P({type:s}),N=P({type:s}),C=P({type:u}),v((z=t((E=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return t=e.call.apply(e,[this].concat(a))||this,i(t,"selectNode",z,o(t)),i(t,"titleNode",M,o(t)),i(t,"btnInfo",L,o(t)),i(t,"btnTutorial",O,o(t)),i(t,"btnAdvanced",R,o(t)),i(t,"versionLabel",S,o(t)),t}n(t,e);var a=t.prototype;return a.onLoad=function(){this.titleAction(1.5,30),this.btnTutorial.node.on(s.EventType.CLICK,(function(){new y(g.GOBACK_OR_CONTINUE,"NOTIFICATIONS","<size=33><b>START HERE is a tutorial mode</b></size>\n\n\nYou will learn wallets, tokens, and NFT\nthroughout the game. However, gameplay\ndata won't be saved before signing up.",(function(e){"YES"===e&&(c.stopAll(),h.setCurStage(0),h.initTutorial(),d.nextScene("game",!0))})).open()}),this),this.btnAdvanced.node.on(s.EventType.CLICK,(function(){c.stopAll(),d.nextSceneDirectly("login")}),this),this.btnInfo.node.on(s.EventType.CLICK,(function(){new y(g.OK,"INFORMATION","<b><size=33>This game is a Web3 demo\n\nof XPLA ACADEMY</size></b><size=26>\n\nClick START HERE to create a wallet,\nand access Web3 features\nfrom ADVANCED and Web3 Gaming Ops</size>").open()}),this),this.versionLabel.string="v1.2.3-release"},a.titleAction=function(e,t){var n=this,i=p(this.titleNode.position).by(e,new b(0,t),{easing:"smooth",onUpdate:function(e,t){n.titleNode.position=e}}),o=p(this.titleNode.position).by(e,new b(0,-t),{easing:"smooth",onUpdate:function(e,t){n.titleNode.position=e}});p(this.titleNode.position).sequence(i,o).repeatForever().start()},a.btnActionOutIn=function(e,t,n,i,o,a){t.setPosition(0,i),t.active=!0;var r=p(e.position).to(n,new b(0,i,0),{easing:"smooth",onUpdate:function(t,n){e.position=t}}).call((function(){e.active=!1})),l=p(t.position).to(n,new b(0,o,0),{easing:"smooth",onUpdate:function(e,n){t.position=e}}).call((function(){void 0!==a&&(a.active=!0)}));p(this.node.position).sequence(r,l).start()},t}(f)).prototype,"selectNode",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(E.prototype,"titleNode",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(E.prototype,"btnInfo",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(E.prototype,"btnTutorial",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(E.prototype,"btnAdvanced",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(E.prototype,"versionLabel",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=E))||I));a._RF.pop()}}}));

System.register("chunks:///_virtual/NetworkMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,a,r,o,i,s,c,l;return{setters:[function(e){t=e.asyncToGenerator,n=e.regeneratorRuntime},function(e){a=e.cclegacy,r=e.resources,o=e.Prefab,i=e.instantiate,s=e.Label,c=e.BlockInputEvents,l=e.tween}],execute:function(){a._RF.push({},"f3198oEeVJHU7PqrI/SAdr5","NetworkMgr",void 0);var u=e("NetworkMgr",function(){function e(){this.serverUrl="https://gw-qa-gcl.c2xstation.net:40202/",this.connectNode=null,this.callBack=void 0}e.getInstance=function(){return null===e.instance&&(e.instance=new e),e.instance};var a=e.prototype;return a.reqRegister=function(e,t,n){this.callBack=n;var a={id:e,password:t,name:""};this.sendData("client/user-register",a,!1)},a.reqLogin=function(e,t,n){this.callBack=n;var a={id:e,password:t};this.sendData("client/user-login",a,!1)},a.reqDeleteAccount=function(e,t,n){this.callBack=n;var a={id:e,password:t};this.sendData("client/user-delete",a,!1)},a.reqWalletConnect=function(e,t,n,a,r){this.callBack=r;var o={wallet:e,id:t,password:n,amount:a};this.sendData("wallet/wallet-connect",o,!1)},a.reqUserInfo=function(e,t){this.callBack=t;var n={pid:e};this.sendData("client/user-info",n,!1)},a.reqTokenReward=function(e,t,n,a,r){this.callBack=r;var o={wallet:e,amount:t,xplaAmount:n};this.sendUI("wallet/tutorial-token-reward",o,a,"Requesting a token",!0)},a.reqPaddleNftMintUnsigned=function(e,t,n,a,r,o,i,s,c){this.callBack=c;var l={wallet:e,payAmount:t,width:n,count:a,start_has_ball:r,userPubKey:o,userSeq:i};this.sendUI("wallet/tutorial-minting-unsigned",l,s,"Requesting",!1)},a.reqPaddleNftMint=function(e,t,n,a,r){this.callBack=r;var o={wallet:e,tid:t,userTx:n};this.sendUI("wallet/tutorial-minting",o,a,"Minting",!0)},a.reqNftList=function(e,t){this.callBack=t;var n={wallet:e};this.sendData("wallet/wallet-nft-list",n,!1)},a.reqNftInfo=function(e,t,n){this.callBack=n;var a={wallet:e,tokenId:t};this.sendData("wallet/wallet-nft-info",a,!1)},a.reqStageClear=function(e,t,n,a){this.callBack=a;var r={id:e,password:t,value:n};this.sendData("user/stage-clear",r,!1)},a.reqInfiniteEnd=function(e,t,n,a){this.callBack=a;var r={id:e,password:t,value:n};this.sendData("user/infinite-end",r,!1)},a.reqInfiniteStart=function(e,t,n,a){this.callBack=a;var r={id:e,password:t,date:n};this.sendData("user/infinite-start",r,!1)},a.reqInfinitePlayInfo=function(){var e=t(n().mark((function e(t,a,r){var o,i;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"user/infinite-play-info",o={id:t,password:a,value:r},e.next=4,this.sendData2("user/infinite-play-info",o);case 4:if(!(i=e.sent).ok){e.next=7;break}return e.abrupt("return",i.json());case 7:return e.abrupt("return",void 0);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}(),a.sendUI=function(e,t,n,a,u){var d=this;null===n?this.sendData(e,t,u):r.load("prefabs/popup_alert",o,(function(r,o){d.connectNode=i(o),d.connectNode.getComponentInChildren(s).string=null!=a?a:"",d.connectNode.addComponent(c),n.addChild(d.connectNode);var f=d.connectNode.getComponentInChildren(s),h=l(d.connectNode).delay(.3).call((function(){f.string=a+""})),p=l(d.connectNode).delay(.3).call((function(){f.string=a+"."})),w=l(d.connectNode).delay(.3).call((function(){f.string=a+".."})),v=l(d.connectNode).delay(.3).call((function(){f.string=a+"..."}));l(d.connectNode).sequence(h,p,w,v).repeatForever().start(),d.sendData(e,t,u)}))},a.sendData=function(e,t,n){var a=this,r=this.serverUrl+e,o=new Headers;o.append("Content-Type","application/json"),o.append("Accept","application/x-www-form-urlencoded"),fetch(r,{method:"POST",credentials:"omit",headers:o,body:JSON.stringify(t)}).then((function(e){if(e.ok)return e.json();throw new Error("Network Error : "+e.status)})).then((function(e){console.log(">> response data : %o",e),"0"===e.returnCode?void 0===n||!1===n?(a.removeNetUI(),a.callBack(e)):a.checkTxHash(e):(a.removeNetUI(),a.callBack(e))})).catch((function(e){console.log("error: ",e.message),a.removeNetUI(),a.callBack({returnCode:"-1",returnMsg:String(e.message)})}))},a.sendData2=function(){var e=t(n().mark((function e(t,a){var r,o,i;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.serverUrl+t,(o=new Headers).append("Content-Type","application/json"),o.append("Accept","application/x-www-form-urlencoded"),e.next=6,fetch(r,{method:"POST",credentials:"omit",headers:o,body:JSON.stringify(a)});case 6:return i=e.sent,e.abrupt("return",i);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),a.checkTxHash=function(e){var t=this,n=this.serverUrl+"wallet/txInfo?txhash="+e.txhash;fetch(n).then((function(e){if(!e.ok)throw new Error("Network response was not ok");return e.json()})).then((function(n){"0"===n.returnCode?(t.removeNetUI(),t.callBack(e)):"500"===n.returnCode?setTimeout((function(){t.checkTxHash(e)}),1e3):(t.removeNetUI(),t.callBack(n))})).catch((function(e){console.log("error: ",e.message),t.removeNetUI(),t.callBack({returnCode:"-1",returnMsg:String(e.message)})}))},a.removeNetUI=function(){null!==this.connectNode&&(this.connectNode.removeFromParent(),this.connectNode=null)},e}());u.instance=null;e("NETWORKMGR",u.getInstance());a._RF.pop()}}}));

System.register("chunks:///_virtual/Paddle.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Brick.ts","./GameCtrl.ts","./GameData.ts","./Ball.ts"],(function(t){var e,i,n,o,a,r,l,s,d,c,u,p,h,f,g,m,y,C;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,r=t._decorator,l=t.Prefab,s=t.PolygonCollider2D,d=t.Contact2DType,c=t.UITransform,u=t.instantiate,p=t.Vec3,h=t.UIOpacity,f=t.Component},function(t){g=t.Brick},function(t){m=t.GAMECTRL},function(t){y=t.ColliderTag},function(t){C=t.Ball}],execute:function(){var b,v,P,B,I,L,A;a._RF.push({},"c6f8co6I81HE6rsLY2IJKXg","Paddle",void 0);var T=r.ccclass,D=r.property;t("Paddle",(b=T("Paddle"),v=D({type:l}),P=D({type:l}),b((L=e((I=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a))||this,n(e,"bullet",L,o(e)),n(e,"gun",A,o(e)),e.immortal=!1,e.paddleHeight=0,e}i(e,t);var a=e.prototype;return a.onLoad=function(){this.node.getComponent(s).on(d.BEGIN_CONTACT,this.onBeginContact,this),this.paddleHeight=this.node.getComponent(c).contentSize.height},a.onBeginContact=function(t,e,i){if(e.tag===y.BRICK)e.node.getComponent(g).damage(!0),!1===this.immortal&&this.bombPaddle(!0);else if(e.tag===y.BALL_ENEMY)e.node.destroy(),!1===this.immortal&&this.bombPaddle(!0);else if(e.tag===y.BALL){var n=e.node,o=n.getWorldPosition(),a=m.paddleMgr.node.getWorldPosition();if(o.y-this.paddleHeight/3>=a.y){var r=m.paddleMgr.getContentWidth(),l=o.x-a.x;n.getComponent(C).moveReflect(l,r)}}},a.setGun=function(t){if(t){var e=u(this.gun);this.node.addChild(e),e.setPosition(0,20)}else this.node.removeAllChildren()},a.createBullet=function(t,e){var i=u(this.bullet);t.addChild(i),i.setPosition(new p(e.position.x+this.node.position.x,e.position.y+40,0))},a.bombPaddle=function(t){t?(m.paddleMgr.bombPaddle(this.node.position),this.node.active=!1):this.node.active=!0},a.isPaddleActive=function(){return this.node.active},a.setImmortal=function(t){this.immortal=t,this.node.getComponent(h).opacity=t?120:255},a.isImmortal=function(){return this.immortal},e}(f)).prototype,"bullet",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=e(I.prototype,"gun",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=I))||B));a._RF.pop()}}}));

System.register("chunks:///_virtual/PaddleMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameData.ts","./Paddle.ts","./GameCtrl.ts","./Utils.ts"],(function(t){var e,i,o,n,l,a,d,r,s,c,u,h,p,f,g,b,v,m,P,N,y,B;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){l=t.cclegacy,a=t._decorator,d=t.Prefab,r=t.Node,s=t.instantiate,c=t.Vec3,u=t.tween,h=t.misc,p=t.v2,f=t.Tween,g=t.ParticleSystem2D,b=t.UIOpacity,v=t.Component},function(t){m=t.GAMEDATA,P=t.PlayMode},function(t){N=t.Paddle},function(t){y=t.GAMECTRL},function(t){B=t.UTILS}],execute:function(){var M,T,I,C,w,A,D,E,_,z,G,S,L,F,R;l._RF.push({},"bd2a8774s1Lr7rfN4uo7eVd","PaddleMgr",void 0);var V=a.ccclass,U=a.property;t("PaddleMgr",(M=V("PaddleMgr"),T=U({type:d}),I=U({type:d}),C=U({type:d}),w=U({type:d}),A=U({type:r}),D=U({type:r}),M((z=e((_=function(t){function e(){for(var e,i=arguments.length,l=new Array(i),a=0;a<i;a++)l[a]=arguments[a];return e=t.call.apply(t,[this].concat(l))||this,o(e,"paddles",z,n(e)),o(e,"direction",G,n(e)),o(e,"directionBg",S,n(e)),o(e,"particle",L,n(e)),o(e,"shotInfoNode",F,n(e)),o(e,"bulletNode",R,n(e)),e.isBullet=!1,e.bulletTime=0,e.bulletDuraTime=0,e.bulletEndTime=10,e.paddleMap=new Map,e.directionNode=null,e.directionBgNode=null,e}i(e,t);var l=e.prototype;return l.init=function(){this.shotInfoNode[0].active=!1,this.shotInfoNode[1].active=!1,this.bulletEndTime=m.getBalanceItemData().gun_sec;var t=m.getPaddleAttr(),e=t.paddle_width,i=t.paddle_count,o=B.getPaddleIdx(e),n=e/[100,120,140][o];this.paddleMap.clear();for(var l=0;l<i;l++){var a=s(this.paddles[o]);this.node.addChild(a),1!==n&&(a.scale=new c(n,1)),this.setChildPaddlePos(e,i,a,l),this.paddleMap.set(l,a.getComponent(N))}if(this.createBallDirection(i),m.getPlayMode()===P.STAGE){var d=!1;(m.tutorial||1===m.getCurStage())&&(d=!0),d&&(this.shotInfoNode[0].active=!0,this.shotInfoNode[1].active=!1)}},l.createBallDirection=function(t){if(null===this.directionNode){this.directionNode=s(this.direction);var e=Math.min(t-1,2);this.directionBgNode=s(this.directionBg[e])}else this.directionNode.active=!0,this.directionBgNode.active=!0,u(this.directionNode).stop();this.node.addChild(this.directionBgNode),this.node.addChild(this.directionNode),this.directionNode.setPosition(0,0),this.directionNode.angle=90},l.getBallVector=function(){var t=h.degreesToRadians(this.directionNode.angle),e=Math.round(100*Math.cos(t))/100,i=Math.round(100*Math.sin(t))/100;return p(e,i)},l.setBallDirection=function(t,e){if(void 0!==t&&(this.directionNode.active=t,!1===t&&u(this.directionNode).stop()),e){var i=u(this.directionNode).to(.5,{angle:90}),o=u(this.directionNode).to(.5,{angle:150}),n=u(this.directionNode).to(.5,{angle:90}),l=u(this.directionNode).to(.5,{angle:30});u(this.directionNode).tag(3).sequence(i,o,n,l).repeatForever().start()}else f.stopAllByTag(3)},l.getContentWidth=function(){var t=m.getPaddleAttr(),e=0;return this.paddleMap.forEach((function(i){null!==i&&(i.isPaddleActive()&&(e+=t.paddle_width))})),e},l.setPosition=function(t){this.node.setPosition(new c(t,this.node.position.y,0))},l.setChildPaddlePos=function(t,e,i,o){var n=0;e>1&&(n=-(t/2)*(e-1));var l=n+t*o;i.setPosition(new c(l,i.position.y))},l.getPaddles=function(){var t=[];return this.paddleMap.forEach((function(e){t.push(e)})),t},l.bombPaddle=function(t){var e=this,i=s(this.particle);i.parent=this.node,i.setPosition(t),i.getComponent(g).duration=.5;var o=m.getPaddleAttr();u(this.node).delay(.1).call((function(){var t=0;e.paddleMap.forEach((function(e){null!==e&&e.isPaddleActive()&&t++}));var i=!0,n=0;e.paddleMap.forEach((function(l){l.isPaddleActive()&&(e.setChildPaddlePos(o.paddle_width,t,l.node,n),i=!1,n++)})),i?(y.ballMgr.destroyAllBall(),e.directionNode.active=!1,e.directionBgNode.active=!1,y.procGameOver()):y.setPaddleWidth()})).start()},l.resetPaddle=function(){var t=this,e=m.getPaddleAttr();this.createBallDirection(e.paddle_count),this.paddleMap.forEach((function(i,o){null!==i&&(i.bombPaddle(!1),t.setChildPaddlePos(e.paddle_width,e.paddle_count,i.node,o))})),y.setPaddleWidth(),this.bulletNode.removeAllChildren(),this.resetBullet()},l.resetBullet=function(){this.isBullet=!1,this.bulletTime=0,this.bulletDuraTime=0,this.paddleMap.forEach((function(t){null!==t&&t.setGun(!1)}))},l.pauseBullet=function(){this.isBullet=!1},l.resumeBullet=function(){!1===this.isBullet&&this.bulletDuraTime>0&&(this.isBullet=!0)},l.createBullet=function(){this.isBullet=!0,this.bulletTime=0,this.bulletDuraTime=0,this.paddleMap.forEach((function(t){null!==t&&t.setGun(!0)}))},l.setImmortal=function(t){this.paddleMap.forEach((function(e){e.setImmortal(t)}))},l.update=function(t){var e=this;this.isBullet&&y.isPlayingNow()&&(this.bulletDuraTime+=t,this.bulletDuraTime<=this.bulletEndTime?(this.bulletTime+=t,this.bulletTime>=.5&&(this.paddleMap.forEach((function(t){null!==t&&t.isPaddleActive()&&t.createBullet(e.bulletNode,e.node)})),this.bulletTime=0)):this.resetBullet())},l.setVisibleShotInfo=function(t,e){if(this.shotInfoNode[t].active=e,1===t)if(e){var i=u(this.shotInfoNode[1].getComponent(b)).to(.1,{opacity:255}),o=u(this.shotInfoNode[1].getComponent(b)).to(2,{opacity:255}),n=u(this.shotInfoNode[1].getComponent(b)).to(.1,{opacity:0});u(this.shotInfoNode[1].getComponent(b)).sequence(i,o,n).repeatForever().start()}else u(this.shotInfoNode[1]).stop()},l.getPos=function(){return this.node.position},e}(v)).prototype,"paddles",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),G=e(_.prototype,"direction",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(_.prototype,"directionBg",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),L=e(_.prototype,"particle",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(_.prototype,"shotInfoNode",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),R=e(_.prototype,"bulletNode",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=_))||E));l._RF.pop()}}}));

System.register("chunks:///_virtual/Persistant.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameData.ts","./SceneMgr.ts","./XplaJs.ts","./NetworkMgr.ts","./Utils.ts"],(function(t){var n,e,s,r,c,o,a,i,u,l;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,s=t._decorator,r=t.director,c=t.Component},function(t){o=t.GameData},function(t){a=t.SceneMgr},function(t){i=t.XplaJs},function(t){u=t.NetworkMgr},function(t){l=t.Utils}],execute:function(){var p;e._RF.push({},"af315yFZBJA54wlI4dYwiWZ","Persistant",void 0);var f=s.ccclass;s.property,t("Persistant",f("Persistant")(p=function(t){function e(){return t.apply(this,arguments)||this}return n(e,t),e.prototype.onLoad=function(){o.getInstance(),a.getInstance(),i.getInstance(),u.getInstance(),l.getInstance(),r.loadScene("menu")},e}(c))||p);e._RF.pop()}}}));

System.register("chunks:///_virtual/Popup.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var p,e,o,i,n,s,r,a,u,l,d,c,h,E,_,C,T,O,I,y;return{setters:[function(t){p=t.inheritsLoose},function(t){e=t.cclegacy,o=t._decorator,i=t.Node,n=t.resources,s=t.SpriteFrame,r=t.Sprite,a=t.BlockInputEvents,u=t.Prefab,l=t.instantiate,d=t.director,c=t.Canvas,h=t.Vec3,E=t.tween,_=t.Label,C=t.RichText,T=t.Button,O=t.math,I=t.EditBox,y=t.Component}],execute:function(){var N;e._RF.push({},"96a0dNwE3RHwrzHc0TRzBrE","Popup",void 0);var m=o.ccclass,U=(o.property,t("PopupType",function(t){return t[t.OK=0]="OK",t[t.YES_OR_NO=1]="YES_OR_NO",t[t.GOBACK_OR_CONTINUE=2]="GOBACK_OR_CONTINUE",t[t.ALERT_SIMPLE=3]="ALERT_SIMPLE",t[t.ALERT_SIMPLE_ANI=4]="ALERT_SIMPLE_ANI",t[t.ALERT_AUTO_REMOVE=5]="ALERT_AUTO_REMOVE",t}({})));t("Popup",m("Popup")(N=function(t){function e(p,e,o,n,s){var r;return(r=t.call(this)||this).popupUI=null,r.title=null,r.descript=void 0,r.clipboardStr=void 0,r.popupType=null,r.callback=void 0,r.popupType=p,r.title=e,r.descript="<color=#000000>"+o+"</color>",r.callback=n,r.clipboardStr=s,r.node=new i("Popup"),r}p(e,t);var o=e.prototype;return o.open=function(){var t=this;if(this.popupType!==U.ALERT_AUTO_REMOVE){var p=new i("PopupBg");n.load("textures/popup_back_bg/spriteFrame",s,null,(function(t,e){p.addComponent(r).spriteFrame=e})),this.node.addChild(p),p.addComponent(a)}var e="";e=this.popupType>=U.ALERT_SIMPLE&&this.popupType<=U.ALERT_AUTO_REMOVE?"prefabs/popup_alert":"prefabs/popup_ui",n.load(e,u,(function(p,e){t.popupUI=l(e),t.node.addChild(t.popupUI),d.getScene().getComponentInChildren(c).node.addChild(t.node),t.node.setSiblingIndex(9998);var o=!0;t.popupType!==U.ALERT_AUTO_REMOVE&&void 0===t.clipboardStr||(o=!1),o?(t.popupUI.scale=new h(.3,.3,0),E(t.popupUI).to(.1,{scale:new h(1.2,1.2,0)}).to(.1,{scale:new h(1,1,0)}).call((function(){t.addContent()})).start()):t.addContent()}))},o.close=function(t){void 0!==this.callback&&this.callback(t),this.node.removeFromParent()},o.addContent=function(){var t=this;if(this.popupUI.getChildByName("Title").getComponent(_).string=this.title,this.popupType===U.ALERT_AUTO_REMOVE)this.popupUI.setPosition(this.popupUI.position.x,this.popupUI.position.y+300),E(this.popupUI).delay(1.6).call((function(){t.node.removeFromParent()})).start();else if(this.popupType===U.ALERT_SIMPLE||this.popupType===U.ALERT_SIMPLE_ANI){var p=this.popupUI.getChildByName("Title").getComponent(_);if(this.popupType===U.ALERT_SIMPLE_ANI){var e=E(this.popupUI).delay(.3).call((function(){p.string=t.title+""})),o=E(this.popupUI).delay(.3).call((function(){p.string=t.title+"."})),i=E(this.popupUI).delay(.3).call((function(){p.string=t.title+".."})),n=E(this.popupUI).delay(.3).call((function(){p.string=t.title+"..."}));E(this.popupUI).sequence(e,o,i,n).repeatForever().start()}}else{if(void 0!==this.descript)this.popupUI.getChildByName("Descript").getComponent(C).string=this.descript;this.popupType===U.OK?this.createButton("textures/btn_ok/spriteFrame","OK"):this.popupType!==U.YES_OR_NO&&this.popupType!==U.GOBACK_OR_CONTINUE||(this.createButton("textures/btn_no/spriteFrame","NO"),this.createButton("textures/btn_yes/spriteFrame","YES")),void 0!==this.clipboardStr&&this.addClipboard()}},o.createButton=function(t,p,e){var o=this,a=new i(p);n.load(t,s,null,(function(t,p){a.addComponent(r).spriteFrame=p}));var u=a.addComponent(T);if(u.transition=T.Transition.SCALE,u.zoomScale=1.2,u.duration=.1,this.node.addChild(a),a.on(T.EventType.CLICK,(function(){o.close(p)}),this),e)a.setPosition(this.popupUI.getChildByName("X").position);else if(this.popupType===U.OK)a.setPosition(this.popupUI.getChildByName("OK").position);else if(this.popupType===U.YES_OR_NO||this.popupType===U.GOBACK_OR_CONTINUE){var l=new i;a.addChild(l),l.setPosition(new h(-3,3,0));var d=l.addComponent(_);d.color=O.Color.WHITE,d.fontSize=30,d.isBold=!0;var c=this.popupUI.getChildByName("YesorNo").position.y;"NO"===p?(a.setPosition(this.popupUI.getChildByName("YesorNo").getChildByName("No").position.x,c),this.popupType===U.GOBACK_OR_CONTINUE?(d.fontSize=26,d.string="GO BACK"):d.string="NO"):"YES"===p&&(a.setPosition(this.popupUI.getChildByName("YesorNo").getChildByName("Yes").position.x,c),this.popupType===U.GOBACK_OR_CONTINUE?(d.fontSize=26,d.string="CONTINUE"):d.string="YES")}},o.addClipboard=function(){var t=this.popupUI.getChildByName("Descript");t.setPosition(t.position.x,t.position.y+20);var p=this.popupUI.getChildByName("Clipboard");p.active=!0,p.getComponent(I).string=this.clipboardStr},e}(y))||N);e._RF.pop()}}}));

System.register("chunks:///_virtual/SceneMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Utils.ts"],(function(e){var n,t,o,a,i,r,d,s,c,l,u,h,g,p,f,m,v,C;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy,o=e._decorator,a=e.resources,i=e.director,r=e.Canvas,d=e.BlockInputEvents,s=e.UIOpacity,c=e.tween,l=e.Node,u=e.UITransform,h=e.Prefab,g=e.instantiate,p=e.Label,f=e.Sprite,m=e.SpriteFrame,v=e.Component},function(e){C=e.UTILS}],execute:function(){var S,y;t._RF.push({},"594abk8bjFFhKa/BfIEUup+","SceneMgr",void 0);var I=o.ccclass,b=(o.property,e("SceneMgr",I("SceneMgr")(((y=function(e){function t(){for(var n,t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return(n=e.call.apply(e,[this].concat(o))||this).loadingIdx=0,n.loadingStr=["XPLA means 'Explore and Play' 😍","XPLA is built by people with creative heart,\nfor people with creative mind! 🍀","Turn your game to fun Web3 gaming with us! 🔥","🌈 Use free source code as you wish!\n(don't do bad things)","Hope you have a peaceful day! 💻☕️"],n}n(t,e),t.getInstance=function(){return null===t.instance&&(t.instance=new t),t.instance};var o=t.prototype;return o.nextSceneDirectly=function(e){a.loadScene(e,(function(e,n){null!==n.scene&&i.runScene(n)}))},o.nextScene=function(e,n){if(n){var t=this.loadingStr.length-1;this.loadingIdx=C.getRandomInt(0,t)}else this.loadingIdx=-1;this.fadeOut(e,n)},o.fadeOut=function(e,n){var t=this,o=i.getScene().getComponentInChildren(r);this.addNode(o.node,0,n,!0),this.node.addComponent(d);var l=.3;n&&(l=3);var u=this.node.getComponent(s);c(u).to(.5,{opacity:255}).delay(l).call((function(){a.loadScene(e,(function(e,o){if(null!==o.scene){var a=o.scene.getComponentInChildren(r);t.addNode(a.node,255,n,!1),t.fadeIn(n),i.runScene(o)}}))})).start()},o.fadeIn=function(e){var n=this,t=e?.5:.3,o=this.node.getComponent(s);c(o).to(t,{opacity:0}).call((function(){n.node.removeFromParent()})).start()},o.addNode=function(e,n,t,o){var i=this;this.node=new l("Loading"),e.addChild(this.node),this.node.setSiblingIndex(9999);var r=e.getComponent(u),d=this.node.addComponent(u);if(d.setContentSize(r.width,r.height),d.setAnchorPoint(.5,.5),t){a.load("prefabs/loading",h,(function(e,n){var t=g(n);t.getChildByName("Label").getComponent(p).string=i.loadingStr[i.loadingIdx],i.node.addChild(t),o&&a.load("prefabs/loading_character",h,(function(e,n){var o=g(n);t.addChild(o),o.setPosition(t.getChildByName("Character").getPosition());c(o).to(3.6,{angle:-360}).start()}))}))}else{var v=this.node.addComponent(f);a.load("textures/fade_bg/spriteFrame",m,null,(function(e,n){v.spriteFrame=n}))}this.node.addComponent(s).opacity=n},t}(v)).instance=null,S=y))||S));e("SCENEMGR",b.getInstance());t._RF.pop()}}}));

System.register("chunks:///_virtual/SignUp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Popup.ts","./NetworkMgr.ts","./GameData.ts","./SceneMgr.ts","./Utils.ts"],(function(e){var n,t,i,o,r,a,l,s,c,u,d,p,g,b,f,h,y,w,C,m,L,N;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,l=e.Node,s=e.Toggle,c=e.Button,u=e.EditBox,d=e.Label,p=e.Color,g=e.tween,b=e.Vec3,f=e.Component,h=e.Sprite},function(e){y=e.Popup,w=e.PopupType},function(e){C=e.NETWORKMGR},function(e){m=e.GAMEDATA},function(e){L=e.SCENEMGR},function(e){N=e.UTILS}],execute:function(){var M,v,I,T,P,S,B,W,z,x,D,A,E,O,R,F,U,_,k,K,Y,q,G,H,V,X,j;r._RF.push({},"738a1zcSfdHWYSVQOOBfVc/","SignUp",void 0);var Q=a.ccclass,J=a.property,Z=function(e){return e[e.ID=0]="ID",e[e.PW=1]="PW",e[e.PW_CONFIRM=2]="PW_CONFIRM",e[e.MAX=3]="MAX",e}(Z||{});e("SignUp",(M=Q("SignUp"),v=J({type:l}),I=J({type:l}),T=J({type:l}),P=J({type:s}),S=J({type:c}),B=J({type:c}),W=J({type:c}),z=J({type:c}),x=J({type:u}),D=J({type:d}),A=J({type:d}),E=J({type:d}),M((F=n((R=function(e){function n(){for(var n,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return n=e.call.apply(e,[this].concat(r))||this,i(n,"signUpNode",F,o(n)),i(n,"lastChanceNode",U,o(n)),i(n,"alertNode",_,o(n)),i(n,"togglePw",k,o(n)),i(n,"btnSignup",K,o(n)),i(n,"btnConfirm",Y,o(n)),i(n,"btnCopyAddress",q,o(n)),i(n,"btnCopyMnemonic",G,o(n)),i(n,"editBoxes",H,o(n)),i(n,"addressLabel",V,o(n)),i(n,"mnemonicLabel",X,o(n)),i(n,"warningLabel",j,o(n)),n.isWarningMsg=!1,n}t(n,e);var r=n.prototype;return r.onLoad=function(){var e=this;this.signUpNode.active=!0,this.lastChanceNode.active=!1,this.addressLabel.string=m.getTutorialAddress(),this.mnemonicLabel.string=m.getTutorialMnemonic();for(var n=window.matchMedia("(prefers-color-scheme: dark)"),t=function(t){e.editBoxes[t].node.on("editing-did-began",(function(){n.matches&&(e.editBoxes[t].getComponent(h).color=new p(151,151,151)),e.isWarningMsg&&(e.alertNode.active=!0,e.warningLabel.string="Your wallet will be linked to your account",e.warningLabel.color=p.BLACK,e.isWarningMsg=!1)}),e),e.editBoxes[t].node.on("editing-did-ended",(function(){n.matches&&(e.editBoxes[t].getComponent(h).color=p.WHITE)}),e)},i=0;i<Z.MAX;i++)t(i);this.btnSignup.node.on(c.EventType.CLICK,(function(){if(e.checkRegister()){new y(w.YES_OR_NO,"NOTIFICATION","<size=33><b>Break The Bricks collects\n\nyour ID, PW, and Wallet address</b></size>\n\n\nData will only be used for verification.\nSign up for YES to confirm\nyour agreement",(function(n){"YES"===n&&e.reqSignUp()})).open()}})),this.togglePw.node.on("toggle",(function(n){n.isChecked?(e.editBoxes[Z.PW].inputFlag=0,e.editBoxes[Z.PW_CONFIRM].inputFlag=0):(e.editBoxes[Z.PW].inputFlag=5,e.editBoxes[Z.PW_CONFIRM].inputFlag=5)}),this),this.btnCopyAddress.node.on(c.EventType.CLICK,(function(){N.copyToClipboard(m.getTutorialAddress())}),this),this.btnCopyMnemonic.node.on(c.EventType.CLICK,(function(){N.copyToClipboard(m.getTutorialMnemonic())}),this),this.btnConfirm.node.on(c.EventType.CLICK,(function(){L.nextScene("home",!1)}))},r.checkRegister=function(){var e=this.editBoxes[Z.ID].string,n=this.editBoxes[Z.PW].string,t=this.editBoxes[Z.PW_CONFIRM].string;return e.length<1||n.length<1||t.length<1?(this.alertNode.active=!1,this.warningLabel.string="Fill in all three fields",this.warningLabel.color=p.RED,this.isWarningMsg=!0,g(this.warningLabel.node).to(.2,{scale:new b(1.2,1.2)}).to(.2,{scale:new b(1,1)}).start(),!1):n===t||(this.alertNode.active=!1,this.warningLabel.string="Password does not match",this.warningLabel.color=p.RED,this.isWarningMsg=!0,g(this.warningLabel.node).to(.2,{scale:new b(1.2,1.2)}).to(.2,{scale:new b(1,1)}).start(),!1)},r.reqSignUp=function(){var e=this,n=m.getTutorialAddress(),t=this.editBoxes[Z.ID].string,i=this.editBoxes[Z.PW].string,o=m.getTutorialDiamond();C.reqWalletConnect(n,t,i,o,(function(n){if("0"===n.returnCode)C.reqLogin(t,i,(function(n){"0"===n.returnCode&&(m.setPassword(i),m.setServerData(n),e.signUpNode.active=!1,e.lastChanceNode.active=!0,m.setTutorialDiamond(0))}));else{var o="<size=33><b>"+n.returnMsg+"\n\n\n</b></size>";"400"===n.returnCode?o+="Cannot be created with that ID":"402"===n.returnCode?o+="Your ID can only consist of\n4-12 characters of letters and numbers.":"403"===n.returnCode?o+="Your password can only consist of\n4-12 characters of letters, numbers.":o+="Please check and try again.",new y(w.OK,"NOTIFICATIONS",o).open()}}))},n}(f)).prototype,"signUpNode",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=n(R.prototype,"lastChanceNode",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=n(R.prototype,"alertNode",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=n(R.prototype,"togglePw",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=n(R.prototype,"btnSignup",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=n(R.prototype,"btnConfirm",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=n(R.prototype,"btnCopyAddress",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=n(R.prototype,"btnCopyMnemonic",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=n(R.prototype,"editBoxes",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),V=n(R.prototype,"addressLabel",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=n(R.prototype,"mnemonicLabel",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=n(R.prototype,"warningLabel",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=R))||O));r._RF.pop()}}}));

System.register("chunks:///_virtual/StageSelect.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameData.ts","./SceneMgr.ts"],(function(e){var t,n,a,r,o,i,l,c,s,u,g,p,f,d,S;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,i=e._decorator,l=e.Prefab,c=e.Node,s=e.instantiate,u=e.Button,g=e.Component,p=e.Tween},function(e){f=e.GAMEDATA,d=e.PlayMode},function(e){S=e.SCENEMGR}],execute:function(){var y,h,v,b,m,C,B;o._RF.push({},"3bfbbrwgYZCP6VHtBflKGaM","StageSelect",void 0);var D=i.ccclass,E=i.property;e("StageSelect",(y=D("StageSelect"),h=E({type:l}),v=E({type:c}),y((C=t((m=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return t=e.call.apply(e,[this].concat(o))||this,a(t,"stageLock",C,r(t)),a(t,"arrayNode",B,r(t)),t}n(t,e);var o=t.prototype;return o.onLoad=function(){this.setStage()},o.setStage=function(){for(var e=Number(f.getServerData().highStage),t=0;t<4;t++)for(var n=0;n<5;n++){var a=5*t+n,r=this.arrayNode.getChildByName("Stage"+a);if(null!==r)if(e<a){var o=s(this.stageLock);r.addChild(o),r.getComponent(u).destroy()}else this.addButton(r,a.toString())}},o.addButton=function(e,t){var n=new g.EventHandler;n.target=this.node,n.component="StageSelect",n.handler="stageSltCB",n.customEventData=t;var a=e.getComponent(u);a.clickEvents.push(n),a.transition=3},o.stageSltCB=function(e,t){var n=parseInt(t)+1;p.stopAll(),f.setPlayMode(d.STAGE),f.setCurStage(n),S.nextScene("game",!1)},t}(g)).prototype,"stageLock",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(m.prototype,"arrayNode",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=m))||b));o._RF.pop()}}}));

System.register("chunks:///_virtual/TopUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameData.ts","./Item.ts"],(function(e){var t,n,i,r,o,s,a,c,u,l,b,d,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,s=e._decorator,a=e.Label,c=e.Node,u=e.Vec3,l=e.tween,b=e.Component},function(e){d=e.GAMEDATA},function(e){p=e.ItemType}],execute:function(){var h,S,f,N,g,T,m,y,w,L,I,_,E,O,U,D,A,v,B,k,C;o._RF.push({},"1755d0S5YRMpaM4KaQ7AOIC","TopUI",void 0);var z=s.ccclass,R=s.property,M=e("TOPUI_KIND",function(e){return e[e.SC=0]="SC",e[e.STAGE=1]="STAGE",e[e.BONUS_STR=2]="BONUS_STR",e[e.TOKEN=3]="TOKEN",e[e.DIAMOND=4]="DIAMOND",e[e.LIFE=5]="LIFE",e}({}));e("TopUI",(h=z("TopUI"),S=R({type:a}),f=R({type:a}),N=R({type:a}),g=R({type:a}),T=R({type:a}),m=R({type:c}),y=R({type:c}),w=R({type:c}),L=R({type:c}),h((E=t((_=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return t=e.call.apply(e,[this].concat(o))||this,i(t,"scLabel",E,r(t)),i(t,"stageLabel",O,r(t)),i(t,"tokenLabel",U,r(t)),i(t,"diamondLabel",D,r(t)),i(t,"lifeLabel",A,r(t)),i(t,"bonusNode",v,r(t)),i(t,"bonusStrNode",B,r(t)),i(t,"modeNode",k,r(t)),i(t,"assetNode",C,r(t)),t.bonusStr=[!1,!1,!1,!1],t.sc=0,t.earnedDiamond=0,t}n(t,e);var o=t.prototype;return o.init=function(){d.tutorial?this.bonusNode.setPosition(-40,0):this.assetNode[2].active=!1,this.modeNode[d.getPlayMode()].active=!0,this.resetTopUI(!0,!0,!0)},o.resetTopUI=function(e,t,n){e&&(this.sc=0,this.scLabel.string=String(this.sc)),t&&(this.earnedDiamond=0,this.diamondLabel.string=String(this.earnedDiamond)),n&&(this.tokenLabel.string=String(0),d.setEarnedToken(0))},o.getTopUIPos=function(e){switch(e){case p.COIN_POUCH:return this.assetNode[0].position;case p.LIFE:return this.assetNode[1].position;case p.BONUS_STR_X:case p.BONUS_STR_P:case p.BONUS_STR_L:case p.BONUS_STR_A:return this.bonusStrNode[e-p.BONUS_STR_X].position;case p.SU:return this.modeNode[1].position;case p.GAME_TOKEN_POUCH:return this.assetNode[2].position}},o.utUI=function(e,t,n){switch(e){case M.SC:this.sc+=t,this.scLabel.string=String(this.sc),n&&l(this.scLabel.node).to(.1,{scale:new u(1.2,1.2,0)}).to(.1,{scale:new u(1,1,0)}).start();break;case M.STAGE:var i=t.toString();i.length<2&&(i="0"+i),this.stageLabel.string=i;break;case M.BONUS_STR:this.bonusStr[t]=!0,this.bonusStrNode[t].getChildByName("Earn").active=!0,n&&this.scaleTweenAction(this.bonusStrNode[t],.1,new u(1.2,1.2,0),new u(1,1,0)).start();break;case M.TOKEN:var r=d.addEarnedToken(t);this.tokenLabel.string=String(r),n&&this.scaleTweenAction(this.assetNode[2],.1,new u(1.1,1.1,0),new u(1,1,0)).start();break;case M.DIAMOND:this.earnedDiamond+=t,this.diamondLabel.string=String(this.earnedDiamond),n&&this.scaleTweenAction(this.assetNode[0],.1,new u(1.1,1.1,0),new u(1,1,0)).start();break;case M.LIFE:this.lifeLabel.string=String(t),n&&this.scaleTweenAction(this.assetNode[1],.1,new u(1.1,1.1,0),new u(1,1,0)).start()}},o.isCompleteBonusStr=function(){var e=!0;return this.bonusStr.forEach((function(t,n){!1===t&&(e=!1)})),e},o.resetBonusStr=function(){var e=this;this.bonusStr.forEach((function(t,n){e.bonusStr[n]=!1,e.bonusStrNode[n].getChildByName("Earn").active=!1}))},o.hideBonusStr=function(){this.bonusNode.active=!1},o.getCS=function(){return this.sc},o.getEarnedDiamond=function(){return this.earnedDiamond},o.scaleTweenAction=function(e,t,n,i){return l(e).to(t,{scale:n}).to(t,{scale:i})},t}(b)).prototype,"scLabel",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(_.prototype,"stageLabel",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(_.prototype,"tokenLabel",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(_.prototype,"diamondLabel",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(_.prototype,"lifeLabel",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(_.prototype,"bonusNode",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(_.prototype,"bonusStrNode",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),k=t(_.prototype,"modeNode",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),C=t(_.prototype,"assetNode",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),I=_))||I));o._RF.pop()}}}));

System.register("chunks:///_virtual/TutorialMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./XplaJs.ts","./Utils.ts","./Popup.ts","./GameData.ts","./SceneMgr.ts","./NetworkMgr.ts"],(function(e){var t,n,i,o,r,a,l,u,s,c,p,d,T,b,f,g,E,N,y,C,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,l=e.Node,u=e.RichText,s=e.Button,c=e.Toggle,p=e.Prefab,d=e.Label,T=e.instantiate,b=e.Component},function(e){f=e.XPLAJS},function(e){g=e.UTILS},function(e){E=e.Popup,N=e.PopupType},function(e){y=e.GAMEDATA},function(e){C=e.SCENEMGR},function(e){h=e.NETWORKMGR}],execute:function(){var m,A,L,v,w,_,M,O,R,S,I,G,K,z,x,F,k,W,P,D,q,B,X,H,U,Y,j,J,Q,V,Z,$,ee,te,ne,ie,oe,re,ae,le,ue,se,ce,pe,de,Te,be;r._RF.push({},"de76e6fqk1B8pn0bAOjwfQr","TutorialMgr",void 0);var fe=a.ccclass,ge=a.property,Ee=function(e){return e[e.MAIN=0]="MAIN",e[e.TOKEN=1]="TOKEN",e[e.EXPLORER=2]="EXPLORER",e[e.NFT=3]="NFT",e[e.TX=4]="TX",e}(Ee||{}),Ne=function(e){return e[e.WELCOME=0]="WELCOME",e[e.CREATE_WALLET=1]="CREATE_WALLET",e[e.REWARD=2]="REWARD",e[e.GET_TOKEN=3]="GET_TOKEN",e[e.GET_TOKEN_LEARN=4]="GET_TOKEN_LEARN",e[e.GET_NFT=5]="GET_NFT",e[e.GET_NFT_LEARN=6]="GET_NFT_LEARN",e[e.WELL_DONE=7]="WELL_DONE",e[e.MAX=8]="MAX",e}(Ne||{});e("TutorialMgr",(m=fe("TutorialMgr"),A=ge({type:l}),L=ge({type:l}),v=ge({type:l}),w=ge({type:u}),_=ge({type:s}),M=ge({type:s}),O=ge({type:s}),R=ge({type:s}),S=ge({type:s}),I=ge({type:s}),G=ge({type:s}),K=ge({type:s}),z=ge({type:s}),x=ge({type:s}),F=ge({type:s}),k=ge({type:s}),W=ge({type:s}),P=ge({type:s}),D=ge({type:s}),q=ge({type:l}),B=ge({type:c}),X=ge({type:p}),m((Y=t((U=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,i(t,"bgNode",Y,o(t)),i(t,"pilotNode",j,o(t)),i(t,"pagingNode",J,o(t)),i(t,"commonTitleText",Q,o(t)),i(t,"btnWelcome",V,o(t)),i(t,"btnCopyAddress",Z,o(t)),i(t,"btnCopyMnemonic",$,o(t)),i(t,"btnGoReward",ee,o(t)),i(t,"btnStage2",te,o(t)),i(t,"btnTxHash",ne,o(t)),i(t,"btnExplorer",ie,o(t)),i(t,"btnGoToken",oe,o(t)),i(t,"btnLearnToken",re,o(t)),i(t,"btnGoNft",ae,o(t)),i(t,"btnMinting",le,o(t)),i(t,"btnLearnNft",ue,o(t)),i(t,"btnGoLast",se,o(t)),i(t,"btnAcademys",ce,o(t)),i(t,"btnGoTitle",pe,o(t)),i(t,"stepNode",de,o(t)),i(t,"toggleConfirm",Te,o(t)),i(t,"progress",be,o(t)),t.txHashCw20=null,t.mintCost=1e3,t.rewardWallet=1e3,t.academyLinks=["https://academy.xpla.dev/startlearning/overview/intro","https://academy.xpla.dev/startlearning/category/utilize-tokens-cw20","https://academy.xpla.dev/startlearning/settings/create-testnet-transaction/check-tx-in-explorer","https://academy.xpla.dev/startlearning/category/utilize-nftcw721","https://explorer.xpla.io/testnet/tx/"],t}n(t,e);var r=t.prototype;return r.onLoad=function(){var e=y.getTutorialStep();this.setNextStep(e),this.initListener()},r.setNextStep=function(e){var t=this;e>=Ne.CREATE_WALLET&&(this.stepNode[e-1].active=!1),e!==Ne.GET_TOKEN&&(this.stepNode[e].active=!0),y.setTutorialStep(e);var n=this.node.getChildByName("Step"+e);if(null!==n){var i=1;e>=Ne.GET_TOKEN&&e<=Ne.GET_NFT?i=2:e>=Ne.GET_NFT_LEARN&&(i=3),this.commonTitleText.string="<color=#000000>STAGE "+i+"  <b>"+["A WARM WELCOME","CREATE A WALLET","","COLLECT ACADEMY TOKENS","CHECK OUT XPLA ACADEMY","EXPERIENCE MINTING","CHECK OUT XPLA ACADEMY",""][e]+"</b></color>";var o=0;if(e===Ne.WELCOME){o=1,this.pilotNode.active=!0;n.getChildByName("Talk").getChildByName("Sentence").getComponent(u).string="<color=#000000>Welcome to the <b>BREAK THE BRICKS</b>\n: XPLA ACADEMY EDITION\n\n<b>Let's make your XPLA Wallet!</b></color>\n<color=#004FFF>This will be your companion\non your Web3 journey.</color>"}else if(e===Ne.CREATE_WALLET){o=2;var r=y.getTutorialAddress();this.pilotNode.active=!1,n.getChildByName("Address").getChildByName("Label").getComponent(d).string=r,n.getChildByName("Mnemonic").getChildByName("Label").getComponent(d).string=y.getTutorialMnemonic()}else if(e===Ne.REWARD)this.bgNode.active=!1,this.pilotNode.active=!1;else if(e===Ne.GET_TOKEN){o=3;var a=y.getEarnedToken(),l=y.getTutorialAddress();h.reqTokenReward(l,a,0,this.node.parent,(function(i){if("0"===i.returnCode){t.pilotNode.active=!0,t.stepNode[e].active=!0,t.txHashCw20=i.txhash;var o="<color=#000000><size=18>You've got</size>\n<size=35><b>"+g.insertCommas(a)+" </b></size><size=18>ACADEMY TOKENS!!</color>\n<color=#004FFF>You can use them in Break The Bricks.</color></size>";n.getChildByName("Talk").getChildByName("Sentence").getComponent(u).string=o}else{var r="<size=33><b>"+i.returnMsg+"\n\n\n</b></size>";"401"===i.returnCode?r+="Failed to retrieve the required User Information during server communication.":r+="Request failed. Try Again.",new E(N.OK,"NOTIFICATIONS",r,(function(){t.setNextStep(Ne.GET_TOKEN_LEARN)})).open()}}))}else e===Ne.GET_TOKEN_LEARN?(o=4,this.pilotNode.active=!1):e===Ne.GET_NFT?(o=5,this.pilotNode.active=!0):e===Ne.GET_NFT_LEARN?(o=6,this.pilotNode.active=!1):e===Ne.WELL_DONE&&(this.pilotNode.active=!1,this.bgNode.active=!1);for(var s=0;s<o;s++){var c=T(this.progress);this.pagingNode.addChild(c),c.setPosition(50*s-100,0)}}},r.initListener=function(){var e=this;this.btnWelcome.node.on(s.EventType.CLICK,(function(){var t=f.createWallet();y.setTutorialMnemonic(t),y.setTutorialAddress(f.getWalletAddress(t)),e.setNextStep(Ne.CREATE_WALLET)}),this),this.btnCopyAddress.node.on(s.EventType.CLICK,(function(){var e=y.getTutorialAddress();null!==e&&g.copyToClipboard(e)}),this),this.btnCopyMnemonic.node.on(s.EventType.CLICK,(function(){g.copyToClipboard(y.getTutorialMnemonic())}),this),this.toggleConfirm.node.on("toggle",(function(t){e.toggleConfirm.isChecked=t.isChecked}),this),this.btnGoReward.node.on(s.EventType.CLICK,(function(){!1===e.toggleConfirm.isChecked?new E(N.OK,"NOTIFICATIONS","Copy the mnemonic to a safe place and\ncheck the checkbox").open():e.rewardCreateWallet()}),this),this.btnStage2.node.on(s.EventType.CLICK,(function(){y.setTutorialStage(2),y.setTutorialStep(Ne.GET_TOKEN),C.nextScene("game",!0)}),this),this.btnTxHash.node.on(s.EventType.CLICK,(function(){setTimeout((function(){var t=e.academyLinks[Ee.TX]+e.txHashCw20;window.open(t,"_blank")}),200)}),this),this.btnExplorer.node.on(s.EventType.CLICK,(function(){setTimeout((function(){window.open(e.academyLinks[Ee.EXPLORER],"_blank")}),200)}),this),this.btnGoToken.node.on(s.EventType.CLICK,(function(){null!==e.txHashCw20&&e.setNextStep(Ne.GET_TOKEN_LEARN)}),this),this.btnLearnToken.node.on(s.EventType.CLICK,(function(){setTimeout((function(){window.open(e.academyLinks[Ee.TOKEN],"_blank")}),200)}),this),this.btnGoNft.node.on(s.EventType.CLICK,(function(){e.setNextStep(Ne.GET_NFT)}),this),this.btnMinting.node.on(s.EventType.CLICK,(function(){e.reqPaddleNftMint()}),this),this.btnLearnNft.node.on(s.EventType.CLICK,(function(){setTimeout((function(){window.open(e.academyLinks[Ee.NFT],"_blank")}),200)}),this),this.btnGoLast.node.on(s.EventType.CLICK,(function(){e.setNextStep(Ne.WELL_DONE)}),this),this.btnAcademys.forEach((function(t,n){t.node.on(s.EventType.CLICK,(function(){setTimeout((function(){window.open(e.academyLinks[n],"_blank")}),200)}),e)})),this.btnGoTitle.node.on(s.EventType.CLICK,(function(){y.setEarnedToken(0),y.setTutorialStage(1),y.setCurStage(1),y.setTutorialStep(Ne.WELCOME),y.tutorial=!1,C.nextSceneDirectly("signup")}),this)},r.rewardCreateWallet=function(){var e=this;this.btnGoReward.enabled=!1;var t=y.getTutorialAddress();h.reqTokenReward(t,this.rewardWallet,1,this.node.parent,(function(t){if("0"===t.returnCode)e.setNextStep(Ne.REWARD);else{e.btnGoReward.enabled=!0;var n="<size=33><b>"+t.returnMsg+"\n\n\n</b></size>";"401"===t.returnCode?n+="Failed to retrieve the required User Information during server communication.":n+="Request failed. Try Again.",new E(N.OK,"NOTIFICATIONS",n,(function(){e.rewardCreateWallet()})).open()}}))},r.reqPaddleNftMint=function(){var e=this;this.btnMinting.enabled=!1;var t=y.getTutorialAddress(),n=y.getTutorialMnemonic();f.getAccountInfo(n).then((function(i){h.reqPaddleNftMintUnsigned(t,e.mintCost,120,2,5,i.pubKey,i.seqNum,e.node.parent,(function(i){if("0"===i.returnCode){var o=String(i.fee).slice(0,-5),r=g.convertString(o,".",18).slice(0,12),a=Number(i.payAmount),l=Number(i.tid),u=String(i.unsignedTx);f.getSignTx(n,u).then((function(n){h.reqPaddleNftMint(t,l,n,e.node.parent,(function(t){if("0"===t.returnCode){var n="<size=33><b>Minting completed!</b></size>\n\n\n<size=20><b>Cost</b>\n<color=#004FFF>"+a+" ACADEMY-TKN</color>\n\n<b>Fee</b>\n<color=#004FFF>"+r+" XPLA</color></size>";new E(N.OK,"NOTIFICATIONS",n,(function(e){y.setTutorialStage(3),y.setTutorialStep(Ne.GET_NFT_LEARN);var t=[{trait_type:"paddle_width",value:String(120)},{trait_type:"paddle_count",value:String(2)},{trait_type:"ball_count",value:String(5)}];y.setPaddleAttr(t),C.nextScene("game",!0)})).open()}else{e.btnMinting.enabled=!0;var i="<size=33><b>"+t.returnMsg+"\n\n\n</b></size>";"401"===t.returnCode?i+="Failed to retrieve the required User Information during server communication.":i+="Request failed. Try Again.",new E(N.OK,"NOTIFICATIONS",i,(function(){e.reqPaddleNftMint()})).open()}}))}))}else e.btnMinting.enabled=!0,new E(N.OK,"NOTIFICATIONS","A server error has occurred\n("+i.returnMsg+")\n\nTry Again.",(function(){e.reqPaddleNftMint()})).open()}))}))},t}(b)).prototype,"bgNode",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(U.prototype,"pilotNode",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=t(U.prototype,"pagingNode",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=t(U.prototype,"commonTitleText",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(U.prototype,"btnWelcome",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=t(U.prototype,"btnCopyAddress",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=t(U.prototype,"btnCopyMnemonic",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=t(U.prototype,"btnGoReward",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=t(U.prototype,"btnStage2",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=t(U.prototype,"btnTxHash",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ie=t(U.prototype,"btnExplorer",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oe=t(U.prototype,"btnGoToken",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),re=t(U.prototype,"btnLearnToken",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ae=t(U.prototype,"btnGoNft",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),le=t(U.prototype,"btnMinting",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ue=t(U.prototype,"btnLearnNft",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),se=t(U.prototype,"btnGoLast",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ce=t(U.prototype,"btnAcademys",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),pe=t(U.prototype,"btnGoTitle",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),de=t(U.prototype,"stepNode",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Te=t(U.prototype,"toggleConfirm",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),be=t(U.prototype,"progress",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=U))||H));r._RF.pop()}}}));

System.register("chunks:///_virtual/Utils.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Popup.ts","./crypto-ts.umd.mjs_cjs=&original=.js","./crypto-ts.umd.js"],(function(n){var t,e,r,o,c,i;return{setters:[function(n){t=n.asyncToGenerator,e=n.regeneratorRuntime},function(n){r=n.cclegacy},function(n){o=n.Popup,c=n.PopupType},null,function(n){i=n.default}],execute:function(){r._RF.push({},"517cdEIbDZMl533HGY4AX5o","Utils",void 0);var a=n("Utils",function(){function n(){}n.getInstance=function(){return null==n.instance&&(n.instance=new n),n.instance};var r=n.prototype;return r.getRandomInt=function(n,t){return n=Math.ceil(n),t=Math.floor(t),Math.floor(Math.random()*(t-n+1))+n},r.convertString=function(n,t,e){if("0"===n||void 0===n)return"0";var r=0;return n.length<=e?(n=this.padStart(n,e-n.length+1,"0"),r=1):r=n.length-e,n.slice(0,r)+t+n.slice(r)},r.insertCommas=function(n){return(new Intl.NumberFormat).format(n)},r.convertRound=function(n,t){return parseFloat(n).toFixed(t)},r.convertDecimalPoint=function(n,t,e){var r=n.indexOf(".");if(-1!==r){var o="<size="+e+">"+n.slice(r+".".length)+"</size>";return"<color="+t+">"+(n.slice(0,r+".".length)+o)+"</color>"}return n},r.sleep=function(n){},r.copyToClipboard=function(n){navigator.clipboard?navigator.clipboard.writeText(n).then((function(){new o(c.ALERT_AUTO_REMOVE,"Copied!").open()})).catch((function(t){new o(c.OK,"NOTIFICATIONS","Failed to copy text to clipboard\n("+t+")",(function(){}),n).open()})):new o(c.OK,"NOTIFICATIONS","<size=26><b>Clipboard API is not supported</b></size>\n\n<size=22>Please manually copy\nand paste the text below</size>",(function(){}),n).open()},r.getPaddleIdx=function(n){var t=0;return n>=120&&n<140?t=1:n>=140&&(t=2),t},r.padStart=function(n,t,e){return t<=0?n:e.repeat(t)+n},r.padLeft=function(n,t,e){return(Array(t).fill(e).join("")+n).slice(-t)},r.padEnd=function(n,t,e){var r=n.length;if(t<=r)return n;var o=t-r,c=Math.ceil(o/e.length);return n+e.repeat(c).slice(0,o)},r.getEncrypt=function(){var n=t(e().mark((function n(t,r){var o;return e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=i.AES.encrypt(r,t),n.abrupt("return",o.toString());case 2:case"end":return n.stop()}}),n)})));return function(t,e){return n.apply(this,arguments)}}(),r.getDecrypt=function(n,t){return i.AES.decrypt(n,t).toString(i.enc.Utf8)},r.getWebEncrypt=function(){var n=t(e().mark((function n(t,r){var o,c,i;return e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=(new TextEncoder).encode(r),n.next=3,window.crypto.subtle.importKey("raw",(new TextEncoder).encode(t),{name:"AES-CBC"},!1,["encrypt"]);case 3:return c=n.sent,n.next=6,window.crypto.subtle.encrypt({name:"AES-CBC",iv:new Uint8Array(16)},c,o);case 6:return i=n.sent,n.abrupt("return",btoa(String.fromCharCode.apply(String,new Uint8Array(i))));case 8:case"end":return n.stop()}}),n)})));return function(t,e){return n.apply(this,arguments)}}(),r.getWebDecrypt=function(){var n=t(e().mark((function n(t,r){var o,c,i;return e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,window.crypto.subtle.importKey("raw",(new TextEncoder).encode(r),{name:"AES-CBC"},!1,["decrypt"]);case 2:return o=n.sent,c=new Uint8Array(atob(t).split("").map((function(n){return n.charCodeAt(0)}))),n.next=6,window.crypto.subtle.decrypt({name:"AES-CBC",iv:new Uint8Array(16)},o,c.buffer);case 6:return i=n.sent,n.abrupt("return",(new TextDecoder).decode(i));case 8:case"end":return n.stop()}}),n)})));return function(t,e){return n.apply(this,arguments)}}(),n}());a.instance=null;n("UTILS",a.getInstance());r._RF.pop()}}}));

System.register("chunks:///_virtual/Wallet.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameData.ts","./SceneMgr.ts","./Utils.ts","./Popup.ts","./NetworkMgr.ts"],(function(e){var t,n,r,i,a,o,l,s,u,d,p,c,f,b,g,h,v,y,m,N,w,C,S;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,l=e.Node,s=e.Label,u=e.RichText,d=e.Button,p=e.Prefab,c=e.Tween,f=e.UITransform,b=e.tween,g=e.Vec3,h=e.Component,v=e.instantiate},function(e){y=e.GAMEDATA},function(e){m=e.SCENEMGR},function(e){N=e.UTILS},function(e){w=e.Popup,C=e.PopupType},function(e){S=e.NETWORKMGR}],execute:function(){var L,I,T,x,A,P,k,M,_,z,B,D,E,O,U,F,K,G,R,q,W,H,X,Y,Z,V,j,J,Q,$,ee,te,ne,re,ie,ae,oe,le,se,ue,de,pe,ce,fe,be,ge,he,ve,ye;a._RF.push({},"69b34xEVJ5I5o1RCnZZpkiZ","Wallet",void 0);var me=o.ccclass,Ne=o.property;e("Wallet",(L=me("Wallet"),I=Ne({type:l}),T=Ne({type:l}),x=Ne({type:l}),A=Ne({type:s}),P=Ne({type:s}),k=Ne({type:u}),M=Ne({type:s}),_=Ne({type:u}),z=Ne({type:u}),B=Ne({type:s}),D=Ne({type:s}),E=Ne({type:d}),O=Ne({type:d}),U=Ne({type:d}),F=Ne({type:d}),K=Ne({type:d}),G=Ne({type:d}),R=Ne({type:d}),q=Ne({type:p}),W=Ne({type:p}),H=Ne({type:p}),X=Ne({type:p}),Y=Ne({type:p}),L((j=t((V=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,r(t,"rankNode",j,i(t)),r(t,"nftListNode",J,i(t)),r(t,"progressNode",Q,i(t)),r(t,"idLabel",$,i(t)),r(t,"addressLabel",ee,i(t)),r(t,"assetXplaAmount",te,i(t)),r(t,"assetAmounts",ne,i(t)),r(t,"rankText",re,i(t)),r(t,"pageText",ie,i(t)),r(t,"scoreLabel",ae,i(t)),r(t,"dateLabel",oe,i(t)),r(t,"btnLogout",le,i(t)),r(t,"btnDeleteAccount",se,i(t)),r(t,"btnCopy",ue,i(t)),r(t,"btnConvert",de,i(t)),r(t,"btnLeaderboard",pe,i(t)),r(t,"btnMintMore",ce,i(t)),r(t,"btnArrow",fe,i(t)),r(t,"paddleBox",be,i(t)),r(t,"paddleBoxSelector",ge,i(t)),r(t,"paddles",he,i(t)),r(t,"parts",ve,i(t)),r(t,"shadows",ye,i(t)),t.paddleSltIdx=-1,t.paddleSelectorNode=null,t.getNftIdx=0,t.getNftTotalCnt=0,t.getNftTokenList=[],t.nftCurPage=0,t.nftMaxPage=0,t.nftListMap=new Map,t.nftListGradeMap=new Map,t.nftSortArray=null,t}n(t,e);var a=t.prototype;return a.onLoad=function(){this.btnListener(),this.walletUI(),this.nftUI()},a.btnListener=function(){var e=this;this.btnLogout.node.on(d.EventType.CLICK,(function(){c.stopAll(),m.nextScene("menu",!1)}),this),this.btnDeleteAccount.node.on(d.EventType.CLICK,(function(){new w(C.YES_OR_NO,"NOTIFICATIONS","<size=33><b>Delete Game Account?\n\n\n</b></size><size=23>Your records on the blockchain\nwill not be removed.</size>",(function(e){if("YES"===e){var t=String(y.getServerData().id),n=y.getPassword();S.reqDeleteAccount(t,n,(function(e){"0"===e.returnCode?new w(C.OK,"NOTIFICATIONS","<size=33><b>Game account\n\nsuccessfully deleted</b></size>",(function(){c.stopAll(),m.nextScene("menu",!1)})).open():new w(C.OK,"NOTIFICATIONS","A server error has occurred\n("+e.returnMsg+")").open()}))}})).open()}),this),this.btnCopy.node.on(d.EventType.CLICK,(function(){var t=e.addressLabel.string;null!==t&&N.copyToClipboard(t)}),this),this.btnConvert.node.on(d.EventType.CLICK,(function(){setTimeout((function(){var e=String(y.getServerData().convertUri);window.open(e,"_blank")}),200)}),this),this.btnLeaderboard.node.on(d.EventType.CLICK,(function(){setTimeout((function(){var e=String(y.getServerData().leaderboardUri);window.open(e,"_blank")}),200)}),this),this.btnMintMore.node.on(d.EventType.CLICK,(function(){setTimeout((function(){var e=String(y.getServerData().mintUri);window.open(e,"_blank")}),200)}),this),this.btnArrow[0].node.on(d.EventType.CLICK,(function(){e.nftCurPage>0&&e.nftCurPage--,e.makePaddleBox(!1)}),this),this.btnArrow[1].node.on(d.EventType.CLICK,(function(){e.nftCurPage<e.nftMaxPage&&e.nftCurPage++,e.makePaddleBox(!1)}),this)},a.walletUI=function(){var e=y.getServerData(),t=e.id;this.idLabel.string=t;var n=e.wallet;this.addressLabel.string=n;var r=N.convertRound(e.xpla,6),i=N.convertDecimalPoint(r,"#000000",16);this.assetXplaAmount.string=i;var a=N.insertCommas(parseInt(e.token));this.assetAmounts[0].string=a;var o=N.insertCommas(e.diamond);this.assetAmounts[1].string=o;var l=e.chainRanking;if(l<0)this.rankNode[0].active=!0,this.rankNode[1].active=!1;else{this.rankNode[0].active=!1,this.rankNode[1].active=!0;var s=N.insertCommas(l);this.rankText.string="<color=#000000><b>"+s+"</b></color> <color=#fa1a1a><size=18>RANK</size></color>";var u=this.rankText.getComponent(f).width,d=this.rankNode[1].position.x,p=this.rankNode[1].position.y;this.rankNode[1].setPosition(d-u/4,p);var c=N.insertCommas(e.chainHighScore);this.scoreLabel.string=c,this.dateLabel.string="[Date "+e.chainHighScoreDate+"]"}},a.nftUI=function(){var e=this,t=b(this.progressNode).by(2,{angle:-360}),n=b(this.progressNode).by(2,{angle:-360});b(this.progressNode).sequence(t,n).repeatForever().start();this.nftListMap.set("NON_NFT_PADDLE",{name:"NON_NFT_PADDLE",attributes:[{trait_type:"paddle_width",value:"100"},{trait_type:"paddle_count",value:"1"},{trait_type:"ball_count",value:"3"}]}),this.nftListGradeMap.set("NON_NFT_PADDLE",230);var r=String(y.getServerData().wallet);S.reqNftList(r,(function(t){if("0"===t.returnCode)if(e.getNftTokenList=t.tokenList.tokens,e.getNftTotalCnt=e.getNftTokenList.length,e.getNftTotalCnt>0){var n=e.getNftTokenList[e.getNftIdx];e.reqNftInfo(r,String(n))}else e.nftSortArray=Array.from(e.nftListGradeMap).sort((function(e,t){return t[1]-e[1]})),e.makePaddleBox(!0);else new w(C.OK,"NOTIFICATIONS1","A server error has occurred\n("+t.returnMsg+")").open()}))},a.reqNftInfo=function(e,t){var n=this;S.reqNftInfo(e,t,(function(r){if("0"===r.returnCode){var i=0,a=r.extension,o=a.attributes;if(null==o||o.forEach((function(e){switch(String(e.trait_type)){case"paddle_width":i+=Number(e.value);break;case"paddle_count":i+=100*Number(e.value);break;case"ball_count":i+=10*Number(e.value)}})),n.nftListMap.set(t,a),n.nftListGradeMap.set(t,i),n.getNftIdx++,n.getNftIdx===n.getNftTotalCnt)n.nftSortArray=Array.from(n.nftListGradeMap).sort((function(e,t){return t[1]-e[1]})),n.makePaddleBox(!0);else{var l=n.getNftTokenList[n.getNftIdx];n.reqNftInfo(e,String(l))}}else new w(C.OK,"NOTIFICATIONS2","A server error has occurred\n("+r.returnMsg+")").open()}))},a.makePaddleBox=function(e){var t=this;!1===e&&c.stopAll(),this.nftListNode.removeAllChildren(),this.btnArrow[0].node.active=!1,this.btnArrow[1].node.active=!1;var n=this.nftSortArray.length;this.nftMaxPage=Math.trunc((n-1)/3);for(var r=3*this.nftCurPage,i=r+Math.min(n-r,3),a=0,o=0,l=function(){var e=t.nftSortArray[d][0],n=t.nftListMap.get(e),r=n.attributes,i=v(t.paddleBox);i.getChildByName("Name").getComponent(s).string=n.name,t.nftListNode.addChild(i),t.addButton(i,o.toString());var l=(i.getComponent(f).width+20)*o;i.setPosition(new g(l,0,0));var p=i.getChildByName("Extension").getComponent(u),c="",h=["","",""],y=0;null==r||r.forEach((function(e){"paddle_count"===e.trait_type?a=Number(e.value):"paddle_width"===e.trait_type&&(y=Number(e.value));var n=t.getTypeUIStr(String(e.trait_type));if(void 0!==n){var r=n+" <b>"+e.value+"</b>";"Ball"!==n&&(r+="  |  ");var i=t.getTypeUIIdx(String(e.trait_type));void 0!==i&&(h[i]=r)}}));for(var m=0;m<3;m++)c+=h[m];p.string="<color=#000000>"+c+"</color>";var w=i.getChildByName("Paddle");if(null!==w){for(var C=0;C<a;C++){var S=N.getPaddleIdx(y),L=v(t.paddles[S]);if(null!==L){var I=y/[100,120,140][S];1!==I&&(L.scale=new g(I,1));var T=L.getComponent(f).width;t.setChildPaddlePos(T,a,L,C),w.addChild(L)}}var x=Math.max(0,Math.min(a-1,2)),A=v(t.parts[x]);w.addChild(A);var P=b(w.position).by(1,new g(0,10),{easing:"smooth",onUpdate:function(e,t){w.position=e}}),k=b(w.position).by(1,new g(0,-10),{easing:"smooth",onUpdate:function(e,t){w.position=e}});b(w.position).sequence(P,k).repeatForever().start();var M=v(t.shadows[x]);if(null!==M){i.getChildByName("Shadow").addChild(M);var _=b(M).to(1,{scale:new g(.5,1,0)}),z=b(M).to(1,{scale:new g(1,1,0)});b(M).sequence(_,z).repeatForever().start()}}t.paddleSltIdx===3*t.nftCurPage+o&&(t.paddleSelectorNode=v(t.paddleBoxSelector),i.addChild(t.paddleSelectorNode)),o++},d=r;d<i;d++)l();this.pageText.string="<color=#000000><b>"+(this.nftCurPage+1)+" </b></color><color=#a9a9a9>/ "+(this.nftMaxPage+1)+"</color>",this.nftMaxPage>0&&(this.nftCurPage>0&&(this.btnArrow[0].node.active=!0),this.nftCurPage<this.nftMaxPage&&(this.btnArrow[1].node.active=!0))},a.setChildPaddlePos=function(e,t,n,r){var i=0;t>1&&(i=-(e/2)*(t-1));var a=i+e*r;n.setPosition(new g(a,n.position.y))},a.addButton=function(e,t){var n=new h.EventHandler;n.target=this.node,n.component="Wallet",n.handler="paddleBoxSltCB",n.customEventData=t,e.getComponent(d).clickEvents.push(n)},a.paddleBoxSltCB=function(e,t){var n=parseInt(t);if(this.paddleSltIdx!=n){var r=e.target;null!==this.paddleSelectorNode&&this.paddleSelectorNode.removeFromParent(),this.paddleSelectorNode=v(this.paddleBoxSelector),r.addChild(this.paddleSelectorNode),this.paddleSltIdx=3*this.nftCurPage+n;var i=this.nftSortArray[this.paddleSltIdx][0];y.setPaddleAttr(this.nftListMap.get(i).attributes)}},a.getTypeUIStr=function(e){return"paddle_width"===e?"Width":"paddle_count"===e?"Count":"ball_count"===e?"Ball":void 0},a.getTypeUIIdx=function(e){return"paddle_width"===e?1:"paddle_count"===e?0:"ball_count"===e?2:void 0},a.isSltNft=function(){return this.paddleSltIdx>=0},t}(h)).prototype,"rankNode",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),J=t(V.prototype,"nftListNode",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=t(V.prototype,"progressNode",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=t(V.prototype,"idLabel",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=t(V.prototype,"addressLabel",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=t(V.prototype,"assetXplaAmount",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=t(V.prototype,"assetAmounts",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),re=t(V.prototype,"rankText",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ie=t(V.prototype,"pageText",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ae=t(V.prototype,"scoreLabel",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oe=t(V.prototype,"dateLabel",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),le=t(V.prototype,"btnLogout",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),se=t(V.prototype,"btnDeleteAccount",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ue=t(V.prototype,"btnCopy",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),de=t(V.prototype,"btnConvert",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pe=t(V.prototype,"btnLeaderboard",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ce=t(V.prototype,"btnMintMore",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),fe=t(V.prototype,"btnArrow",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),be=t(V.prototype,"paddleBox",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ge=t(V.prototype,"paddleBoxSelector",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),he=t(V.prototype,"paddles",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ve=t(V.prototype,"parts",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ye=t(V.prototype,"shadows",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Z=V))||Z));a._RF.pop()}}}));

System.register("chunks:///_virtual/XplaJs.ts",["./rollupPluginModLoBabelHelpers.js","cc","./bundle.mjs_cjs=&original=.js","./bundle.js"],(function(e){var n,t,r,c;return{setters:[function(e){n=e.asyncToGenerator,t=e.regeneratorRuntime},function(e){r=e.cclegacy},null,function(e){c=e.default}],execute:function(){r._RF.push({},"ea450yKT/9AHqAizanvPeGc","XplaJs",void 0);var a=e("ContractMsgType",function(e){return e[e.CW20_TOKEN=0]="CW20_TOKEN",e[e.CW721_NFT=1]="CW721_NFT",e[e.DATA_SAVE=2]="DATA_SAVE",e}({})),u=e("XplaJs",function(){function e(){}e.getInstance=function(){return null===e.instance&&(e.instance=new e),e.instance},e.getLcdClient=function(){return null===e.lcd&&(e.lcd=new c.LCDClient({URL:"https://cube-lcd.xpla.dev",chainID:"cube_47-5"})),e.lcd};var r=e.prototype;return r.getLcdChainID=function(){return e.getLcdClient().config.chainID},r.getWalletAddress=function(e){return new c.MnemonicKey({mnemonic:e}).accAddress},r.getAccountInfo=function(){var r=n(t().mark((function n(r){var a,u,s,i,o;return t().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=new c.MnemonicKey({mnemonic:r}),s=e.getLcdClient().wallet(u),i=JSON.parse(String(null==(a=u.publicKey)?void 0:a.toJSON())),n.next=5,s.sequence();case 5:return o=n.sent,n.abrupt("return",{pubKey:i.key,seqNum:o});case 7:case"end":return n.stop()}}),n)})));return function(e){return r.apply(this,arguments)}}(),r.getSignTx=function(){var r=n(t().mark((function n(r,a){var u,i,o,l,p,d,g;return t().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=new c.MnemonicKey({mnemonic:r}),i=e.getLcdClient().wallet(u),o=e.getLcdClient().tx.decode(a),n.next=5,i.accountNumber();case 5:return l=n.sent,n.next=8,i.sequence();case 8:return p=n.sent,d={chainID:s.getLcdChainID(),accountNumber:l,sequence:p,signMode:c.SignatureV2.SignMode.SIGN_MODE_LEGACY_AMINO_JSON},n.next=12,u.signTx(o,d);case 12:return g=n.sent,n.abrupt("return",e.getLcdClient().tx.encode(g));case 14:case"end":return n.stop()}}),n)})));return function(e,n){return r.apply(this,arguments)}}(),r.createWallet=function(){return(new c.MnemonicKey).mnemonic},r.getXplaBalance=function(){var r=n(t().mark((function n(r){var c;return t().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.getLcdClient().bank.balance(r);case 3:if(void 0!==(c=n.sent)[0].get("axpla")){n.next=6;break}return n.abrupt("return","0");case 6:return n.abrupt("return",c[0].get("axpla").amount.toString());case 9:n.prev=9,n.t0=n.catch(0),console.log("getXplaBalance error : ",n.t0);case 12:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e){return r.apply(this,arguments)}}(),r.getTokenBalance=function(){var r=n(t().mark((function n(r){var c;return t().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.getLcdClient().wasm.contractQuery(this.getExecuteAddress(a.CW20_TOKEN),{balance:{address:r}});case 3:return c=n.sent,n.abrupt("return",c.balance.toString());case 7:n.prev=7,n.t0=n.catch(0),console.log("getTokenBalance error : ",n.t0);case 10:case"end":return n.stop()}}),n,this,[[0,7]])})));return function(e){return r.apply(this,arguments)}}(),r.queryContract=function(){var r=n(t().mark((function n(r,c){var a;return t().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.getLcdClient().wasm.contractQuery(this.getExecuteAddress(r),c);case 3:return a=n.sent,n.abrupt("return",a);case 7:n.prev=7,n.t0=n.catch(0),console.log("queryContract error : ",n.t0,", type : ",r,", msg : ",c);case 10:case"end":return n.stop()}}),n,this,[[0,7]])})));return function(e,n){return r.apply(this,arguments)}}(),r.getExecuteAddress=function(e){switch(e){case a.CW20_TOKEN:return"xpla1shxdwyus9u6tgvu6kl5tdgem4d4at9vhanq0hxyqnm4ly3wd8awqkwlcj3";case a.CW721_NFT:return"xpla1c94ss2232fm5v7cs36g5n56fd9vldflmg2l4g77qj3r86fdmqststr5eya";case a.DATA_SAVE:return"xpla19pkt7pjr4xh2lmhw522sxcnuw0wjnzwg9dyl6ju23hnyaqaj77qqpez40k"}},e}());u.instance=null,u.lcd=null;var s=e("XPLAJS",u.getInstance());r._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});